import base64
exec(base64.b64decode('IyMjLS0tLS0tLS0tLVsgSU1QT1JUIE1PRFVMRSBMQUlOIF0tLS0tLS0tLS0tICMjIw0KaW1wb3J0IG9zLCBzeXMsIHJlLCB0aW1lLCByZXF1ZXN0cywgY2FsZW5kYXIsIHJhbmRvbSwgYnM0LCB1dWlkLCBqc29uLCBzdWJwcm9jZXNzDQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXJzZXINCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUsZGF0ZXRpbWUNCmZyb20gcmVxdWVzdHMuZXhjZXB0aW9ucyBpbXBvcnQgQ29ubmVjdGlvbkVycm9yDQpzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCg0KIyMjLS0tLS0tLS0tLVsgSU1QT1JUIE1PRFVMRSBSSUNIIF0tLS0tLS0tLS0tICMjIw0KZnJvbSByaWNoLnBhbmVsIGltcG9ydCBQYW5lbA0KZnJvbSByaWNoLnRyZWUgaW1wb3J0IFRyZWUNCmZyb20gcmljaCBpbXBvcnQgcHJpbnQgYXMgcHJpbnRzDQpmcm9tIHJpY2guY29uc29sZSBpbXBvcnQgQ29uc29sZQ0KZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQ0KZnJvbSByaWNoLmNvbHVtbnMgaW1wb3J0IENvbHVtbnMNCmZyb20gcmljaC5wcm9ncmVzcyBpbXBvcnQgUHJvZ3Jlc3MsU3Bpbm5lckNvbHVtbixCYXJDb2x1bW4sVGV4dENvbHVtbixUaW1lRWxhcHNlZENvbHVtbg0KY29uc29sZSA9IENvbnNvbGUoKQ0KDQojIyMtLS0tLS0tLS0tWyBXQVJOQSBQUklOVCBSSUNIIF0tLS0tLS0tLS0tICMjIw0KTTIgPSAiWyNGRjAwMDBdIiAjIE1FUkFIDQpIMiA9ICJbIzAwRkYwMF0iICMgSElKQVUNCksyID0gIlsjRkZGRjAwXSIgIyBLVU5JTkcNCkIyID0gIlsjMDBDOEZGXSIgIyBCSVJVDQpQMiA9ICJbI0ZGRkZGRl0iICMgUFVUSUgNClUyID0gIlsjQUYwMEZGXSIgIyBVTkdVDQpPMiA9ICJbI0ZGOEYwMF0iICMgT1JBTkdFDQoNCiMjIy0tLS0tLS0tLS1bIEdMT0JBTCBOQU1BIF0tLS0tLS0tLS0tICMjIw0Kc2VrYXJhbmcgPSBjYWxlbmRhci50aW1lZ20odGltZS5nbXRpbWUodGltZS50aW1lKCkpKQ0KdGFtcHVuZyA9IFtdDQp1Z2VuID0gW10NCmhha2l4ID0gW10NCm5nZW50b3R0ID0gW10NCg0KIyMjLS0tLS0tLS0tLVsgQ0VLIFdBUk5BIFRFTUEgXS0tLS0tLS0tLS0gIyMjDQp0cnk6DQoJZmlsZV9jb2xvciA9IG9wZW4oImRhdGEvdGhlbWVfY29sb3IiLCJyIikucmVhZCgpDQoJY29sb3JfdGV4dCA9IGZpbGVfY29sb3Iuc3BsaXQoInwiKVswXQ0KCWNvbG9yX3BhbmVsID0gZmlsZV9jb2xvci5zcGxpdCgifCIpWzFdDQpleGNlcHQ6DQoJY29sb3JfdGV4dCA9ICJbIzAwRkYwMF0iDQoJVzEgPSByYW5kb20uY2hvaWNlKFtNMixIMixLMl0pDQoJVzIgPSByYW5kb20uY2hvaWNlKFtLMixNMixLMl0pDQoJVzMgPSByYW5kb20uY2hvaWNlKFtIMixLMixNMl0pDQoJY29sb3JfcGFuZWwgPSAiIzAwRkYwMCINCgljb2xvcl9vayA9ICIjMDBGRjAwIg0KCWNvbG9yX2NwID0gIiNGRkZGMDAiDQojIyMtLS0tLS0tLS0tWyBHRVQgREFUQSBEQVJJIERFVklDRSBdLS0tLS0tLS0tLSAjIyMNCiNhbmRyb2lkX3ZlcnNpb24gPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dCgiZ2V0cHJvcCByby5idWlsZC52ZXJzaW9uLnJlbGVhc2UiLHNoZWxsPVRydWUpLmRlY29kZSgidXRmLTgiKS5yZXBsYWNlKCJcbiIsIiIpDQojdHJ5OnNpbWNhcmQgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dCgiZ2V0cHJvcCBnc20ub3BlcmF0b3IuYWxwaGEiLHNoZWxsPVRydWUpLmRlY29kZSgidXRmLTgiKS5zcGxpdCgiLCIpWzFdLnJlcGxhY2UoIlxuIiwiIikNCiNleGNlcHQ6c2ltY2FyZCA9IHN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KCJnZXRwcm9wIGdzbS5vcGVyYXRvci5hbHBoYSIsc2hlbGw9VHJ1ZSkuZGVjb2RlKCJ1dGYtOCIpLnNwbGl0KCIsIilbMF0ucmVwbGFjZSgiXG4iLCIiKQ0KI3ZlcnNpX2FwcCA9IHN0cihyYW5kb20ucmFuZGludCgxMTExMTExMTEsOTk5OTk5OTk5KSkNCiMjIy0tLS0tLS0tLS1bIEdFTkVSQVRFIFVTRVJBR0VOVCBdLS0tLS0tLS0tLSAjIyMNCg0KZm9yIHhjVGVhbSBpbiByYW5nZSgxMDAwKToNCglyciA9IHJhbmRvbS5yYW5kaW50DQoJcmMgPSByYW5kb20uY2hvaWNlDQoJbmdlbnRvdDEgPSBmIkRhbHZpay8yLjEuMCAoTGludXg7IFU7IEFuZHJvaWQgOC4wOyBTTS1KNzEwRiBCdWlsZC9NTUIyOUsue3N0cihycigxMTExMTEsMTk5OTk5KSl9LjAwMSkgW0ZCQU4vTWVzc2VuZ2VyTGl0ZTtGQkFWL3tzdHIocnIoMTIwLDE1MCkpfS4wLjAuMi57c3RyKHJyKDExMCwxNTApKX07RkJQTi9jb20uZmFjZWJvb2subWxpdGU7RkJMQy9pbl9JRDtGQkJWL3tzdHIocnIoMjAwMDAwMDAwLDI5OTk5OTk5OSkpfTtGQkNSL0luZG9zYXRPb3JlZG9vO0ZCTUYvUmVhbG1lO0ZCQkQvUmVhbG1lO0ZCRFYvU00tSjcxMEY7RkJTVi85O0ZCQ0EvYXJtNjQtdjhhOm51bGw7RkJETS8iKyIoZGVuc2l0eT0zLjAsd2lkdGg9MTA4MCxoZWlnaHQ9MTkyMCk7RkJfRk0vMTtdIg0KCWlmIG5nZW50b3QxIGluIG5nZW50b3R0OnBhc3MNCgllbHNlOm5nZW50b3R0LmFwcGVuZChuZ2VudG90MSkNCgluZ2VudG90MiA9IGYiRGF2aWsvMi4xLjAgKExpbnV4OyBVOyBBbmRyb2lkIDEwLjAuMDsgTFlBLUFMMTAgQnVpbGQvSFVBV0VJTFlBLUFMMTAue3N0cihycigxMTExMTEsMTk5OTk5KSl9LjAwMSkgW0ZCQU4vTWVzc2VuZ2VyTGl0ZTtGQkFWL3tzdHIocnIoMTIwLDE1MCkpfS4wLjAuMi57c3RyKHJyKDExMCwxNTApKX07RkJQTi9jb20uZmFjZWJvb2subWxpdGU7RkJMQy9lbl9VUztGQkJWL3tzdHIocnIoMjAwMDAwMDAwLDI5OTk5OTk5OSkpfTtGQkNSL251bGw7RkJNRi92aXZvO0ZCQkQvdml2bztGQkRWL0xZQS1BTDEwO0ZCU1YvNi4wLjA7RkJDQS9hcm1lYWJpLXY3YTphcm1lYWJpO0ZCRE0vIisiKGRlbnNpdHktMy4wLHdpZHRoPTEwODAsaGVpZ2h0PTE5MjApO0ZCX0ZNLzE7XSINCglpZiBuZ2VudG90MiBpbiBuZ2VudG90dDpwYXNzDQoJZWxzZTpuZ2VudG90dC5hcHBlbmQobmdlbnRvdDIpDQoJbmdlbnRvdDMgPSBmIkRhbHZpay8yLjEuMCAoTGludXg7IFU7IEFuZHJvaWQgMTA7IEluZmluaXggWDY3MTAgQnVpbGQvVFAxQS57c3RyKHJyKDExMTExMSwxOTk5OTkpKX0uMDE0KSBbRkJBTi9NZXNzZW5nZXJMaXRlO0ZCQVYve3N0cihycigxMjAsMTUwKSl9LjAuMC4yLntzdHIocnIoMTEwLDE1MCkpfTtGQlBOL2NvbS5mYWNlYm9vay5tbGl0ZTtGQkxDL2VuX1VTO0ZCQlYve3N0cihycigyMDAwMDAwMDAsMjk5OTk5OTk5KSl9O0ZCQ1IvVE5UO0ZCTUYvSU5GSU5JWCBNT0JJTElUWSBMSU1JVEVEO0ZCQkQvSW5maW5peDtGQkRWL0luZmluaXhYNjcxMDtGQlNWLzEwO0ZCQ0EvYXJtNjQtdjhhOm51bGw7RkJETS8iKyJ7ZGVuc2l0eT0yLjAsd2lkdGg9NzIwLGhlaWdodD0xNDcyfTtdIg0KCWlmIG5nZW50b3QzIGluIG5nZW50b3R0OnBhc3MNCgllbHNlOm5nZW50b3R0LmFwcGVuZChuZ2VudG90MykNCgluZ2VudG90NCA9IGYiRGFsdmlrLzIuMS4wIChMaW51eDsgVTsgQW5kcm9pZCA4LjEuMDsgTGVub3ZvIFRCLVg2MDVGIEJ1aWxkL09QTTEue3N0cihycigxMTExMTEsMTk5OTk5KSl9LjAwMSkgW0ZCQU4vTWVzc2VuZ2VyTGl0ZTtGQkFWL3tzdHIocnIoMTIwLDE1MCkpfS4wLjAuMi57c3RyKHJyKDExMCwxNTApKX07RkJQTi9jb20uZmFjZWJvb2sub3JjYTtGQkxDL2VuX1VTO0ZCQlYve3N0cihycigyMDAwMDAwMDAsMjk5OTk5OTk5KSl9O0ZCQ1IvbnVsbDtGQk1GL3Zpdm87RkJCRC92aXZvO0ZCRFYvTGVub3ZvIFRCLVg2MDVGO0ZCU1YvMTA7RkJDQS9hcm1lYWJpLXY3YTphcm1lYWJpO0ZCRE0vIisiKGRlbnNpdHktMy4wLHdpZHRoPTEwODAsaGVpZ2h0PTE5MjApOyBGQl9GTS8xO10iDQoJaWYgbmdlbnRvdDQgaW4gbmdlbnRvdHQ6cGFzcw0KCWVsc2U6bmdlbnRvdHQuYXBwZW5kKG5nZW50b3Q0KSANCgluZ2VudG90NSA9IGYiRGFsdmlrLzIuMS4wIChMaW51eDsgVTsgQW5kcm9pZCAxMDsgSW5maW5peCBYNjcyIEJ1aWxkL1FQMUEue3N0cihycigxMTExMTEsMTk5OTk5KSl9LjAwMSkgW0ZCQU4vTWVzc2VuZ2VyTGl0ZTtGQkFWL3tzdHIocnIoMTIwLDE1MCkpfS4wLjAuMi57c3RyKHJyKDExMCwxNTApKX07RkJQTi9jb20uZmFjZWJvb2subWxpdGU7RkJMQy9lbl9VUztGQkJWL3tzdHIocnIoMjAwMDAwMDAwLDI5OTk5OTk5OSkpfTtGQkNSL1ROVDtGQk1GL0lORklOSVggTU9CSUxJVFkgTElNSVRFRDtGQkJEL0luZmluaXg7RkJEVi9JbmZpbml4WDY3MjtGQlNWLzEwO0ZCQ0EvYXJtNjQtdjhhOm51bGw7RkJETS8iKyJ7ZGVuc2l0eT0yLjAsd2lkdGg9NzIwLGhlaWdodD0xNDcyfTtdIg0KCWlmIG5nZW50b3Q1IGluIG5nZW50b3R0OnBhc3MNCgllbHNlOm5nZW50b3R0LmFwcGVuZChuZ2VudG90NSkNCg0KZGVmIGtvbnRvbCgpOg0KIHJyID0gcmFuZG9tLnJhbmRpbnQNCiByYyA9IHJhbmRvbS5jaG9pY2UNCiBrb250b24gPSBmIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCB7c3RyKHJyKDMsOSkpfS57c3RyKHJyKDAsMSkpfS4xOyBBTENBVEVMIE9ORSBUT1VDSCA0MDMwQSBCdWlsZC9KUk8wM0MpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS97c3RyKHJyKDQwLDk5KSl9LjAue3N0cihycigyMzAwLDI5MDApKX0ue3N0cihycig3NSwxNTApKX0gTW9iaWxlIFNhZmFyaS81MzcuMzYiDQogcmV0dXJuIHJhbmRvbS5jaG9pY2UoW2tvbnRvbl0pDQoNCiMjIy0tLS0tLS0tLS1bIEtFVEVSQU5HQU4gV0FLVFUgXS0tLS0tLS0tLS0gIyMjDQpkZWYgdGFodW4oZngpOg0KCWlmIGxlbihmeCk9PTE1Og0KCQlpZiBmeFs6MTBdIGluIFsnMTAwMDAwMDAwMCddICAgICAgIDp0YWh1bnogPSAnMjAwOScNCgkJZWxpZiBmeFs6OV0gaW4gWycxMDAwMDAwMDAnXSAgICAgICA6dGFodW56ID0gJzIwMDknDQoJCWVsaWYgZnhbOjhdIGluIFsnMTAwMDAwMDAnXSAgICAgICAgOnRhaHVueiA9ICcyMDA5Jw0KCQllbGlmIGZ4Wzo3XSBpbiBbJzEwMDAwMDAnLCcxMDAwMDAxJywnMTAwMDAwMicsJzEwMDAwMDMnLCcxMDAwMDA0JywnMTAwMDAwNSddOnRhaHVueiA9ICcyMDA5Jw0KCQllbGlmIGZ4Wzo3XSBpbiBbJzEwMDAwMDYnLCcxMDAwMDA3JywnMTAwMDAwOCcsJzEwMDAwMDknXTp0YWh1bnogPSAnMjAxMCcNCgkJZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDEnXSAgICAgICAgICA6dGFodW56ID0gJzIwMTAtMjAxMScNCgkJZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDInLCcxMDAwMDMnXSA6dGFodW56ID0gJzIwMTEtMjAxMicNCgkJZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDQnXSAgICAgICAgICA6dGFodW56ID0gJzIwMTItMjAxMycNCgkJZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDUnLCcxMDAwMDYnXSA6dGFodW56ID0gJzIwMTMtMjAxNCcNCgkJZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDcnLCcxMDAwMDgnXSA6dGFodW56ID0gJzIwMTQtMjAxNScNCgkJZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDknXSAgICAgICAgICA6dGFodW56ID0gJzIwMTUnDQoJCWVsaWYgZnhbOjVdIGluIFsnMTAwMDEnXSAgICAgICAgICAgOnRhaHVueiA9ICcyMDE1LTIwMTYnDQoJCWVsaWYgZnhbOjVdIGluIFsnMTAwMDInXSAgICAgICAgICAgOnRhaHVueiA9ICcyMDE2LTIwMTcnDQoJCWVsaWYgZnhbOjVdIGluIFsnMTAwMDMnXSAgICAgICAgICAgOnRhaHVueiA9ICcyMDE4Jw0KCQllbGlmIGZ4Wzo1XSBpbiBbJzEwMDA0J10gICAgICAgICAgIDp0YWh1bnogPSAnMjAxOScNCgkJZWxpZiBmeFs6NV0gaW4gWycxMDAwNSddICAgICAgICAgICA6dGFodW56ID0gJzIwMjAnDQoJCWVsaWYgZnhbOjVdIGluIFsnMTAwMDYnLCcxMDAwNycsJzEwMDA4J106dGFodW56ID0gJzIwMjEtMjAyMicNCgkJZWxzZTp0YWh1bno9JycNCgllbGlmIGxlbihmeCkgaW4gWzksMTBdOg0KCQl0YWh1bnogPSAnMjAwOC0yMDA5Jw0KCWVsaWYgbGVuKGZ4KT09ODoNCgkJdGFodW56ID0gJzIwMDctMjAwOCcNCgllbGlmIGxlbihmeCk9PTc6DQoJCXRhaHVueiA9ICcyMDA2LTIwMDcnDQoJZWxzZTp0YWh1bno9JycNCglyZXR1cm4gdGFodW56DQpkaWMgPSB7JzEnOidKYW51YXJ5JywnMic6J0ZlYnJ1YXJ5JywnMyc6J01hcmNoJywnNCc6J0FwcmlsJywnNSc6J01heScsJzYnOidKdW5lJywnNyc6J0p1bHknLCc4JzonQXVndXN0JywnOSc6J1NlcHRlbWJlcicsJzEwJzonT2N0b2JlcicsJzExJzonTm92ZW1iZXInLCcxMic6J0RlY2VtYmVyJ30NCmRpYzIgPSB7JzAxJzonSmFudWFyeScsJzAyJzonRmVicnVhcnknLCcwMyc6J01hcmNoJywnMDQnOidBcHJpbCcsJzA1JzonTWF5JywnMDYnOidKdW5lJywnMDcnOidKdWx5JywnMDgnOidBdWd1c3QnLCcwOSc6J1NlcHRlbWJlcicsJzEwJzonT2N0b2JlcicsJzExJzonTm92ZW1iZXInLCcxMic6J0RldmVtYmVyJ30NCnRnbCA9IGRhdGV0aW1lLm5vdygpLmRheQ0KYmxuID0gZGljWyhzdHIoZGF0ZXRpbWUubm93KCkubW9udGgpKV0NCnRobiA9IGRhdGV0aW1lLm5vdygpLnllYXINCm9rYyA9ICdPSy0nK3N0cih0Z2wpKyctJytzdHIoYmxuKSsnLScrc3RyKHRobikrJy50eHQnDQpjcGMgPSAnQ1AtJytzdHIodGdsKSsnLScrc3RyKGJsbikrJy0nK3N0cih0aG4pKycudHh0Jw0KZGVmIENldGFrQmFubmVyKHVsZmFoc2FkaXlhaCxhc3UpOg0KICAgIENvbnNvbGUod2lkdGg9MTAwKS5wcmludChQYW5lbCh1bGZhaHNhZGl5YWgsc3R5bGU9J3JlZCcpLGp1c3RpZnk9J2NlbnRlcicpDQpkZWYgd2hvYW1pKGtheWEsa29udG9sKToNCiAgICBDb25zb2xlKHdpZHRoPTEwMCkucHJpbnQoUGFuZWwoa2F5YSxzdHlsZT0ncmVkJyksanVzdGlmeT0nY2VudGVyJykNCiMjIy0tLS0tLS0tLS0tLS0tLS0tW10tLS0tLS0tLS0tLS0tLS0tLSMjIw0KIyMjLS0tLS0tLS0tLVsgTE9HTyBBVVRIT1IgREFOIFZFUlNJXS0tLS0tLS0tLS0gIyMjDQpjbGFzcyBMb2dvOg0KCQ0KCSMjIy0tLS0tLS0tLS1bIEJFUlNJSEtBTiBMQVlBUiBdLS0tLS0tLS0tLSAjIyMNCglkZWYgYmVyc2loa2FuX2xheWFyKHNlbGYpOg0KCQlpZiAibGludXgiIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOg0KCQkJdHJ5Om9zLnN5c3RlbSgiY2xlYXIiKQ0KCQkJZXhjZXB0OnBhc3MNCgkJZWxpZiAid2luIiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKToNCgkJCXRyeTpvcy5zeXN0ZW0oImNscyIpDQoJCQlleGNlcHQ6cGFzcw0KCQllbHNlOg0KCQkJdHJ5Om9zLnN5c3RlbSgiY2xlYXIiKSANCgkJCWV4Y2VwdDpwYXNzDQoNCgkjIyMtLS0tLS0tLS0tWyBMT0dPIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBsb2dvbnlhKHNlbGYpOg0KCQlzZWxmLmJlcnNpaGthbl9sYXlhcigpDQoJCXByaW50cyhQYW5lbChmIiIie0gyfeKVreKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVrlxu4pSCIHtNMn3irKQgIHtLMn3irKQgIHtIMn3irKQge0gyfeKUgiBcbntIMn3ilbDilIDilIDilIDilIDilIDilIDilIDilIDilIDila97SDJ9DQogIF9fX19fXyAgICBfXyAgICBfXyAgLl9fXyAgX19fLiBfX19fICAgIF9fX18gIF9fX19fX18gICAgX19fICAgICAgIF9fICAgICAgDQogLyAgX18gIFwgIHwgIHwgIHwgIHwgfCAgIFwvICAgfCBcICAgXCAgLyAgIC8gfCAgIF9fX198ICAvICAgXCAgICAgfCAgfCAgICAgDQp8ICB8ICB8ICB8IHwgIHxfX3wgIHwgfCAgXCAgLyAgfCAgXCAgIFwvICAgLyAgfCAgfF9fICAgIC8gIF4gIFwgICAgfCAgfCAgICAgDQp8ICB8ICB8ICB8IHwgICBfXyAgIHwgfCAgfFwvfCAgfCAgIFxfICAgIF8vICAgfCAgIF9ffCAgLyAgL19cICBcICAgfCAgfCAgICAgDQp8ICBgLS0nICB8IHwgIHwgIHwgIHwgfCAgfCAgfCAgfCAgICAgfCAgfCAgICAgfCAgfCAgICAvICBfX19fXyAgXCAgfCAgYC0tLS0uDQogXF9fX19fXy8gIHxfX3wgIHxfX3wgfF9ffCAgfF9ffCAgICAgfF9ffCAgICAgfF9ffCAgIC9fXy8gICAgIFxfX1wgfF9fX19fX198DQoNCiIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCg0KIyMjLS0tLS0tLS0tLVsgQkFHSUFOIExPR0lOIF0tLS0tLS0tLS0tICMjIw0KY2xhc3MgTG9naW46DQoJDQoJIyMjLS0tLS0tLS0tLVsgRlVOQ1RJT04gSU5JVCBdLS0tLS0tLS0tLSAjIyMNCglkZWYgX19pbml0X18oc2VsZik6DQoJCXNlbGYuaXAgPSBzZXMuZ2V0KCJodHRwOi8vaXAtYXBpLmNvbS9qc29uLyIpLmpzb24oKVsicXVlcnkiXQ0KCQlzZWxmLm5lZ2FyYSA9IHNlcy5nZXQoImh0dHA6Ly9pcC1hcGkuY29tL2pzb24vIikuanNvbigpWyJjb3VudHJ5Il0NCg0KCSMjIy0tLS0tLS0tLS1bIE1FTlUgTE9HSU4gXS0tLS0tLS0tLS0gIyMjDQoJZGVmIG1lbnVfbG9naW4oc2VsZik6DQoJCUxvZ28oKS5sb2dvbnlhKCkNCgkJcHJpbnRzKFBhbmVsKGYie0gyfVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lbnUgTG9naW4iLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlwcmludHMoUGFuZWwoZiIiIntQMn1be2NvbG9yX3RleHR9MXtQMn1dLiBsb2dpbiBtZW5nZ3VuYWthbiBMaWNlbnNpICgge0gyfVByZW1pdW17UDJ9ICkiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCWxvZ2luID0gY29uc29sZS5pbnB1dChmIiB7SDJ94oCiIHtQMn1waWxpaCBtZW51IDogIikNCgkJaWYgbG9naW4gaW5bIjEiLCIwMSJdOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9dW50dWsgbWVtYmVsaSBMaWNlbnNpIHNpbGFoa2FuIGNoYXQgdC5tZS9YdHJ5eVYiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCQljb29raWUgPSBjb25zb2xlLmlucHV0KGYiIHtIMn3igKIge1AyfW1hc3VrYW4gTGljZW5zaSA6ICIpDQoJCQkjb3BlbigiZGF0YS9jb29raWUiLCJ3Iikud3JpdGUoY29va2llKQ0KCQkJc2VsZi5sb2dpbl9jb29raWUoY29va2llKQ0KCQllbHNlOg0KCQkJZXhpdChwcmludHMoUGFuZWwoZiIiIntNMn3wn5mPIG1vaG9uIG1hYWYgZml0dXIgaW5pIHNlZGFuZyBkYWxhbSB0YWhhcCBwZXJiYWlrYW4iIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpKQ0KCQkJDQoJIyMjLS0tLS0tLS0tLVsgTE9HSU4gQ09PS0lFIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBsb2dpbl9jb29raWUoc2VsZixjb29raWUpOg0KCQl0cnk6DQoJCQl1cmwgPSBzZXMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vIixjb29raWVzPXsiY29va2llIjogY29va2llfSkudGV4dA0KCQkJaWYgIkFwYSB5YW5nIEFuZGEgcGlraXJrYW4gc2VrYXJhbmciIGluIHVybDoNCgkJCQlwYXNzDQoJCQllbHNlOg0KCQkJCWZvciB6IGluIHVybC5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCgkJCQkJaWYgIlRpZGFrLCBUZXJpbWEgS2FzaWgiIGluIHoudGV4dDoNCgkJCQkJCWdldCA9IHNlcy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIrelsiaHJlZiJdLGNvb2tpZXM9Y29va2llKQ0KCQkJCQkJcGFyc2luZyA9IHBhcnNlcihnZXQudGV4dCwiaHRtbC5wYXJzZXIiKQ0KCQkJCQkJYWN0aW9uID0gcGFyc2luZy5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSlbImFjdGlvbiJdDQoJCQkJCQlkYXRhID0gew0KCQkJCQkJCSJmYl9kdHNnIjpyZS5zZWFyY2goJ25hbWU9ImZiX2R0c2ciIHZhbHVlPSIoLio/KSInLCBzdHIoZ2V0LnRleHQpKS5ncm91cCgxKSwNCgkJCQkJCQkiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgc3RyKGdldC50ZXh0KSkuZ3JvdXAoMSksDQoJCQkJCQkJInN1Ym1pdCI6ICJPSywgR3VuYWthbiBEYXRhIg0KCQkJCQkJfQ0KCQkJCQkJcG9zdCA9IHNlcy5wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iK2FjdGlvbixkYXRhPWRhdGEsY29va2llcz1jb29raWUpDQoJCQkJCQlicmVhaw0KCQkJb3BlbigiZGF0YS9jb29raWUiLCJ3Iikud3JpdGUoY29va2llKQ0KCQkJTWVudSgpLm1lbnUoKQ0KCQlleGNlcHQ6DQoJCQlwcmludHMoUGFuZWwoZiIiIntNMn1MaWNlbnNpIGludmFsaWQiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCQlzeXMuZXhpdCgpDQoJCQ0KCSMjIy0tLS0tLS0tLS1bIFVCQUggQkFIQVNBIF0tLS0tLS0tLS0tICMjIw0KCWRlZiB1YmFoX2JhaGFzYShzZWxmLGNvb2tpZSk6DQoJCXRyeToNCgkJCXVybCA9IHNlcy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sYW5ndWFnZS8iLGNvb2tpZXM9eyJjb29raWUiOiBjb29raWV9KQ0KCQkJcGFyc2luZyA9IHBhcnNlcih1cmwudGV4dCwiaHRtbC5wYXJzZXIiKQ0KCQkJZm9yIHggaW4gcGFyc2luZy5maW5kX2FsbCgiZm9ybSIseyJtZXRob2QiOiJwb3N0In0pOg0KCQkJCWlmICJCYWhhc2EgSW5kb25lc2lhIiBpbiBzdHIoeCk6DQoJCQkJCWRhdGEgPSB7DQoJCQkJCQkiZmJfZHRzZyIgOiByZS5zZWFyY2goJ25hbWU9ImZiX2R0c2ciIHZhbHVlPSIoLio/KSInLHN0cih1cmwudGV4dCkpLmdyb3VwKDEpLA0KCQkJCQkJImphem9lc3QiIDogcmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgc3RyKHVybC50ZXh0KSkuZ3JvdXAoMSksDQoJCQkJCQkic3VibWl0IiAgOiAiQmFoYXNhIEluZG9uZXNpYSINCgkJCQkJfQ0KCQkJCQlwb3N0ID0gc2VzLnBvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIreFsiYWN0aW9uIl0sZGF0YT1kYXRhLGNvb2tpZXM9eyJjb29raWUiOiBjb29raWV9KQ0KCQlleGNlcHQ6DQoJCQlwYXNzDQoJCQ0KIyMjLS0tLS0tLS0tLVsgQkFHSUFOIE1FTlUgXS0tLS0tLS0tLS0gIyMjDQpjbGFzcyBNZW51Og0KCQ0KCSMjIy0tLS0tLS0tLS1bIEZVTkNUSU9OIElOSVQgXS0tLS0tLS0tLS0gIyMjDQoJZGVmIF9faW5pdF9fKHNlbGYpOg0KCQlzZWxmLm1lbiA9IFtdDQoJCXNlbGYuaWQgPSBbXQ0KCQlzZWxmLmlwID0gc2VzLmdldCgiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iKS5qc29uKClbInF1ZXJ5Il0NCgkJc2VsZi5uZWdhcmEgPSBzZXMuZ2V0KCJodHRwOi8vaXAtYXBpLmNvbS9qc29uLyIpLmpzb24oKVsiY291bnRyeSJdDQoNCgkjIyMtLS0tLS0tLS0tWyBDRUsgSU5GTyBMT0dJTiBdLS0tLS0tLS0tLSAjIyMNCglkZWYgY2VrX2xvZ2luKHNlbGYsY29va2llKToNCgkJdHJ5Og0KCQkJdXJsID0gc2VzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwIixjb29raWVzPWNvb2tpZSkudGV4dA0KCQkJbmFtYSA9IHJlLmZpbmRhbGwoIjx0aXRsZT4oLio/KTwvdGl0bGU+Iix1cmwpWzBdDQoJCQlpZiAiS29udGVuIFRpZGFrIERpdGVtdWthbiIgaW4gbmFtYToNCgkJCQl0cnk6b3MucmVtb3ZlKCJkYXRhL2Nvb2tpZSIpDQoJCQkJZXhjZXB0OnBhc3MNCgkJCQlMb2dpbigpLm1lbnVfbG9naW4oKQ0KCQkJZWxzZToNCgkJCQlyZXR1cm4gbmFtYQ0KCQlleGNlcHQgQ29ubmVjdGlvbkVycm9yOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7TTJ9a29uZWtzaSBpbnRlcm5ldCBrYW11IGJlcm1hc2FsYWgsIHNpbGFoa2FuIGNlayBrb25la3NpIGthbXUga2VtYmFsaSIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJCWV4aXQoKQ0KCQkJDQoJIyMjLS0tLS0tLS0tLVsgTUVOVSBVVEFNQSBdLS0tLS0tLS0tLSAjIyMNCglkZWYgbWVudShzZWxmKToNCgkJTG9nbygpLmxvZ29ueWEoKQ0KCQkNCgkJIyMjLS0tLS0tLS0tLVsgR0VUIENPT0tJRSBEQU4gREFUQSBdLS0tLS0tLS0tLSAjIyMNCgkJdHJ5Og0KCQkJY29rID0gb3BlbigiZGF0YS9jb29raWUiLCJyIikucmVhZCgpDQoJCQljb29raWUgPSB7ImNvb2tpZSI6IGNva30NCgkJCW5hbWEgPSBzZWxmLmNla19sb2dpbihjb29raWUpDQoJCWV4Y2VwdDoNCgkJCXRyeTpvcy5yZW1vdmUoImRhdGEvY29va2llIikNCgkJCWV4Y2VwdDpwYXNzDQoJCQlMb2dpbigpLm1lbnVfbG9naW4oKQ0KCQkNCgkJIyMjLS0tLS0tLS0tLVsgUEFORUwgQklBU0EgXS0tLS0tLS0tLS0gIyMjDQoJCXBvcm5odWIgPSBbXQ0KCQl5b25rb3UgPSBbXQ0KCQlzZWxmLmpvbCA9IENvbnNvbGUoKQ0KCQlzZWxmLnRvbCA9IENvbnNvbGUoKQ0KCQlwcmludHMoUGFuZWwoZiJ7SzJ9ICAgICAgICB7c2VsZi5uZWdhcmF9Iix3aWR0aD04NyxwYWRkaW5nPSgwLDMwKSx0aXRsZT1mIntNMn3igKIge0gyfeKAoiB7SzJ94oCiIHtIMn1OZWdhcmEge00yfeKAoiB7SDJ94oCiIHtLMn3igKIiLHN1YnRpdGxlPWYie00yfeKAoiB7SDJ94oCiIHtLMn3igKIge0gyfVZlcnNpb24gOiBWRVJTSSAwLjEuMHtNMn0g4oCiIHtIMn3igKIge0syfeKAoiIsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCXlvbmtvdS5hcHBlbmQoUGFuZWwoZiIge0syfU5hbWEgQWt1biAgICAgICB7UDJ9OiB7SDJ9e25hbWF9XG4ge0syfVN0YXR1cyBQZW5nZ3VuYSB7UDJ9OiB7SDJ9RXh0cmEgUHJlbWl1bVxuIHtLMn1JcCBBZGRyZXNzICAgICAge1AyfToge0gyfXtzZWxmLmlwfVxuIHtLMn1UYW5nZ2FsICAgICAgICAge1AyfToge0gyfXt0Z2x9Iix3aWR0aD00MyxwYWRkaW5nPSgwLDIpLHRpdGxlPWYie00yfeKAoiB7SDJ94oCiIHtLMn3igKIge0syfUluZm8tVXNlciB7TTJ94oCiIHtIMn3igKIge0syfeKAoiIsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCXlvbmtvdS5hcHBlbmQoUGFuZWwoZiIge0syfUF1dGhvciAgIHtQMn06IHtIMn1PaG15RmFsbFxuIHtLMn1HaXRodWIgIHtQMn0gOiB7SDJ9T2hteUZhbGxcbntLMn0gRmFjZWJvb2sge1AyfToge0gyfUhBQ0tUZWFtXG57SzJ9IFdoYXRzYXBwIHtQMn06IHtIMn0rNjIqKioqKioqKioqKioqIix3aWR0aD00MyxwYWRkaW5nPSgwLDIpLHRpdGxlPWYie00yfeKAoiB7SDJ94oCiIHtLMn3igKIge0syfUluZm8tQXV0aG9yIHtNMn3igKIge0gyfeKAoiB7SzJ94oCiIixzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJc2VsZi5qb2wucHJpbnQoQ29sdW1ucyh5b25rb3UpKQ0KCQlwcmludHMoUGFuZWwoZiJ7SDJ9XHQgICAgICAgICAgICAgICAgICAgICAgICAgICBEYWZ0YXIgTWVudSIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCXBvcm5odWIuYXBwZW5kKFBhbmVsKGYie1AyfVt7Y29sb3JfdGV4dH0wMXtQMn1dLiBjcmFjayB7SzJ9ZGFyaSB7SDJ9aWQgcHVibGlrXG57UDJ9W3tjb2xvcl90ZXh0fTAye1AyfV0uIGNyYWNrIHtLMn1kYXJpIHtIMn1wZW5naWt1dFxue1AyfVt7Y29sb3JfdGV4dH0wM3tQMn1dLiBjcmFjayB7SzJ9ZGFyaSB7SDJ9a29tZW50YXJcbntQMn1be2NvbG9yX3RleHR9MDR7UDJ9XS4gY3JhY2sge0syfWRhcmkge0gyfXJhbmRvbSBlbWFpbCIsd2lkdGg9NDMscGFkZGluZz0oMCwyKSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJcG9ybmh1Yi5hcHBlbmQoUGFuZWwoZiJ7UDJ9W3tjb2xvcl90ZXh0fTA1e1AyfV0uIGNyYWNrIHtLMn1kYXJpIHtIMn1wZW5jYXJpYW4gbmFtYVxue1AyfVt7Y29sb3JfdGV4dH0wNntQMn1dLiBjcmFjayB7SzJ9ZGFyaSB7SDJ9bWVtYmVyIGdydXBcbntQMn1be2NvbG9yX3RleHR9MDd7UDJ9XS4gY3JhY2sge0syfWRhcmkge0gyfWZpbGUgc2VuZGlyaVxue1AyfVt7Y29sb3JfdGV4dH0wOHtQMn1dLiBjZWsge0syfW9wc2kge0gyfWNoZWNrcG9pbnQiLHdpZHRoPTQzLHBhZGRpbmc9KDAsMiksc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCXNlbGYudG9sLnByaW50KENvbHVtbnMocG9ybmh1YikpDQoJCXByaW50cyhQYW5lbChmIiIie1AyfSAgIGtldGlrIHtNMn1sb2dvdXR7UDJ9IHVudHVrIGhhcHVzIGNvb2tpZSBkYW4ga2V0aWsge0gyfWxhaW57UDJ9IHVudHVrIGtlIG1lbnUgbGFpbiIiIix3aWR0aD04NyxwYWRkaW5nPSgwLDYpLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQltZW51ID0gY29uc29sZS5pbnB1dChmIiB7SDJ94oCiIHtQMn1waWxpaCBtZW51IDogIikNCgkJDQoJCSMjIy0tLS0tLS0tLS0tLVsgbG9nb3V0IF0tLS0tLS0tLS0tLS0jIyMNCgkJaWYgbWVudSBpblsibG9nb3V0Il06DQoJCQlvcy5zeXN0ZW0oInJtIGRhdGEvY29va2llIikNCgkJCWV4aXQocHJpbnRzKFBhbmVsKGYiIiJ7SDJ9YmVyaGFzaWwgbWVuZ2hhcHVzIGNvb2tpZSwgc2lsYWhrYW4ga2V0aWsgdWxhbmcgcHl0aG9uIGhha2ktZmIucHkiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpKQ0KCQkjIyMtLS0tLS0tLS0tWyBJRCBQVUJMSUsgXS0tLS0tLS0tLS0gIyMjDQoJCWVsaWYgbWVudSBpblsiMSIsIjAxIl06DQoJCQlwcmludHMoUGFuZWwoZiIiIntQMn0gICAgIG1hc3VrYW4gaWQgdGFyZ2V0LCBwYXN0aWthbiBpZCB0YXJnZXQgYmVyc2lmYXQgcHVibGlrIGRhbiB0aWRhayBwcml2YXRlIiIiLHN1YnRpdGxlPWYie1AyfWtldGlrIHtIMn1tZXtQMn0gdW50dWsgZHVtcCBkYXJpIHRlbWFuIHNlbmRpcmkiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQkJdXNlciA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKAoiB7UDJ9bWFzdWthbiBpZCBhdGF1IHVzZXJuYW1lIDogIikNCgkJCWlmIHVzZXIgaW5bIk1lIiwibWUiXToNCgkJCQl1c2VyID0gRHVtcChjb29raWUpLkdldFVzZXIoKQ0KCQkJRHVtcChjb29raWUpLkR1bXBfUHVibGlrKGYiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3t1c2VyfT92PWZyaWVuZHMiKQ0KCQkJQ3JhY2soKS5hdHVyc2FuZGkoKQ0KCQkJDQoJCSMjIy0tLS0tLS0tLS1bIEtPTUVOVEFSIF0tLS0tLS0tLS0tICMjIw0KCQllbGlmIG1lbnUgaW5bIjMiLCIwMyJdOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9bWFzdWthbiBpZCBwb3N0aW5nYW4sIHBhc3Rpa2FuIHBvc3RpbmdhbiBiZXJzaWZhdCBwdWJsaWsgZGFuIHRpZGFrIHByaXZhdGUiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCQl1c2VyID0gY29uc29sZS5pbnB1dChmIiB7SDJ94oCiIHtQMn1tYXN1a2FuIGlkIHBvc3RpbmdhbiA6ICIpDQoJCQlEdW1wKGNvb2tpZSkuRHVtcF9Lb21lbnRhcihmImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS97dXNlcn0iKQ0KCQkJQ3JhY2soKS5hdHVyc2FuZGkoKQ0KCQkJDQoJCSMjIy0tLS0tLS0tLS1bIEtPTUVOVEFSIF0tLS0tLS0tLS0tICMjIw0KCQllbGlmIG1lbnUgaW5bIjQiLCIwNCJdOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9bWFzdWthbiBuYW1hIHVudHVrIGVtYWlsLCBmb3JtYXQgZW1haWwgYWthbiBzZWxhbHUgQGdtYWlsLmNvbSIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJCXVzZXIgPSBjb25zb2xlLmlucHV0KGYiIHtIMn3igKIge1AyfW1hc3VrYW4gbmFtYSA6ICIpDQoJCQlsaW1pdCA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKAoiB7UDJ9bWFzdWthbiBsaW1pdCA6ICIpDQoJCQlEdW1wKGNvb2tpZSkuRHVtcF9FbWFpbCh1c2VyLGxpbWl0KQ0KCQkJQ3JhY2soKS5hdHVyc2FuZGkoKQ0KCQkJDQoJCSMjIy0tLS0tLS0tLS1bIFBFTkNBUklBTiBOQU1BIF0tLS0tLS0tLS0tICMjIw0KCQllbGlmIG1lbnUgaW5bIjUiLCIwNSJdOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9a2FtdSBiaXNhIG1lbmdndW5ha2FuIGtvbWEgKCwpIHNlYmFnYWkgcGVtaXNhaCBqaWthIGxlYmloIGRhcmkgMSBuYW1hIiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQkJdXNlciA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKAoiB7UDJ9bWFzdWthbiBuYW1hIDogIikNCgkJCWNvbW1vbiA9IG9wZW4oIkhha2kvbmFtYV9pbmRvbmVzaWEiLCJyIikucmVhZCgpLnNwbGl0bGluZXMoKQ0KCQkJZm9yIGlkdCBpbiB1c2VyLnNwbGl0KCIsIik6DQoJCQkJc2VsZi5pZC5hcHBlbmQoaWR0KQ0KCQkJCWZvciBwZW9wbGUgaW4gY29tbW9uOg0KCQkJCQlzZWxmLmlkLmFwcGVuZChwZW9wbGUrIiAiK2lkdCkNCgkJCXRyeToNCgkJCQlmb3IgZ2FzIGluIHNlbGYuaWQ6DQoJCQkJCUR1bXAoY29va2llKS5EdW1wX1BlbmNhcmlhbihmImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9wdWJsaWMve2dhc30iKQ0KCQkJZXhjZXB0OnBhc3MNCgkJCUNyYWNrKCkuYXR1cnNhbmRpKCkNCgkJDQoJCSMjIy0tLS0tLS0tLS1bIE1FTUJFUiBHUlVQIF0tLS0tLS0tLS0tICMjIw0KCQllbGlmIG1lbnUgaW5bIjYiLCIwNiJdOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9bWFzdWthbiBpZCBncnVwLCBwYXN0aWthbiBncnVwIGJlcnNpZmF0IHB1YmxpayBkYW4gdGlkYWsgcHJpdmF0ZSIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJCXVzZXIgPSBjb25zb2xlLmlucHV0KGYiIHtIMn3igKIge1AyfW1hc3VrYW4gaWQgZ3J1cCA6ICIpDQoJCQlEdW1wKGNvb2tpZSkuRHVtcF9NZW1iZXJHcnVwKGYiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2dyb3Vwcy97dXNlcn0iKQ0KCQkJQ3JhY2soKS5hdHVyc2FuZGkoKQ0KCQkJDQoJCSMjIy0tLS0tLS0tLS1bIEZJTEUgTUFTU0FMIF0tLS0tLS0tLS0tICMjIw0KCQllbGlmIG1lbnUgaW5bIjciLCIwNyJdOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9bWFzdWthbiB0ZW1wYXQgZmlsZSwgcGFzdGlrYW4gaXppbiBrZSBwZW55aW1wYW5hbiBzdWRhaCBkaWFrdGlma2FuIiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQkJdXNlciA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKAoiB7UDJ9bWFzdWthbiB0ZW1wYXQgZmlsZSA6ICIpDQoJCQlEdW1wKGNvb2tpZSkuRHVtcF9GaWxlKHVzZXIpDQoJCQlDcmFjaygpLmF0dXJzYW5kaSgpDQoNCgkJIyMjLS0tLS0tLS0tLVsgUElOREFIIEtFIE1FTlUgQk9UIF0tLS0tLS0tLS0tICMjIw0KCQllbGlmIG1lbnUgaW5bIkJPVCIsIkJvdCIsImJvdCJdOg0KCQkJZXhpdChwcmludHMoUGFuZWwoZiIiIntNMn3wn5mPIG1vaG9uIG1hYWYgZml0dXIgaW5pIHNlZGFuZyBkYWxhbSB0YWhhcCBwZXJiYWlrYW4iIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpKQ0KCQkjIyMtLS0tLS0tLS0tWyBPUFNJIENIRUNLUE9JTlQgXS0tLS0tLS0tLS0tLS0jIyMNCgkJZWxpZiBtZW51IGluWyI4IiwiMDgiXToNCgkJCWZpbGVfY3AoKQ0KCQkJDQoJCSMjIy0tLS0tLS0tLS1bIFBJTkRBSCBLRSBNRU5VIExBSU4gXS0tLS0tLS0tLS0gIyMjDQoJCWVsaWYgbWVudSBpblsiTEFJTiIsIkxhaW4iLCJsYWluIl06DQoJCQlMYWluKGNvb2tpZSkubWVudSgpDQoJCQkNCgkJZWxzZToNCgkJCWV4aXQocHJpbnRzKFBhbmVsKGYiIiJ7TTJ98J+ZjyBtb2hvbiBtYWFmIGZpdHVyIGluaSBzZWRhbmcgZGFsYW0gdGFoYXAgcGVyYmFpa2FuIiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKSkNCgkJCQ0KIyMjLS0tLS0tLS0tLVsgQkFHSUFOIERVTVAgXS0tLS0tLS0tLS0gIyMjDQpjbGFzcyBEdW1wOg0KCQ0KCSMjIy0tLS0tLS0tLS1bIEZVTkNUSU9OIElOSVQgXS0tLS0tLS0tLS0gIyMjDQoJZGVmIF9faW5pdF9fKHNlbGYsY29va2llKToNCgkJc2VsZi5jb29raWUgPSBjb29raWUNCgkJCQ0KCSMjIy0tLS0tLS0tLS1bIEdFVCBVU0VSIFNFTkRJUkkgXS0tLS0tLS0tLS0gIyMjDQoJZGVmIEdldFVzZXIoc2VsZik6DQoJCXRyeToNCgkJCXVybCA9IHNlcy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9wcm9maWxlLnBocCIsY29va2llcz1zZWxmLmNvb2tpZSkudGV4dA0KCQkJdWlkID0gcmUuZmluZGFsbCgnbmFtZT0idGFyZ2V0IiB2YWx1ZT0iKC4qPykiJyx1cmwpWzBdDQoJCQlyZXR1cm4gdWlkDQoJCWV4Y2VwdDoNCgkJCXBhc3MNCg0KCSMjIy0tLS0tLS0tLS1bIERVTVAgSUQgUFVCTElLIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBEdW1wX1B1YmxpayhzZWxmLHVybCk6DQoJCXRyeToNCgkJCXVybCA9IHBhcnNlcihzZXMuZ2V0KHVybCxjb29raWVzPXNlbGYuY29va2llKS50ZXh0LCJodG1sLnBhcnNlciIpDQoJCQlmb3IgeiBpbiB1cmwuZmluZF9hbGwoImEiLGhyZWY9VHJ1ZSk6DQoJCQkJaWYgImZyZWYiIGluIHouZ2V0KCJocmVmIik6DQoJCQkJCWlmICIvcHJvZmlsZS5waHA/aWQ9IiBpbiB6LmdldCgiaHJlZiIpOnVpZCA9ICIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoInByb2ZpbGVcLnBocFw/aWQ9KC4qPykmIix6LmdldCgiaHJlZiIpKSk7bmFtYSA9IHoudGV4dA0KCQkJCQllbHNlOnVpZCA9ICIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoIi8oLio/KVw/Iix6LmdldCgiaHJlZiIpKSk7bmFtYSA9IHoudGV4dA0KCQkJCQlpZiB1aWQrIjw9PiIrbmFtYSBpbiB0YW1wdW5nOnBhc3MNCgkJCQkJZWxzZTp0YW1wdW5nLmFwcGVuZCh1aWQrIjw9PiIrbmFtYSkNCgkJCQkJY29uc29sZS5wcmludChmIiB7SDJ94oCiIHtQMn1zZWRhbmcgcHJvc2VzIG1lbmd1bXB1bGthbiBpZCwgYmVyaGFzaWwgbWVuZGFwYXRrYW4ge2xlbih0YW1wdW5nKX0gaWQuLi4uIiwgZW5kPSJcciIpDQoJCQlmb3IgeCBpbiB1cmwuZmluZF9hbGwoImEiLGhyZWY9VHJ1ZSk6DQoJCQkJaWYgIkxpaGF0IFRlbWFuIExhaW4iIGluIHgudGV4dDoNCgkJCQkJc2VsZi5EdW1wX1B1YmxpaygiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLyIreC5nZXQoImhyZWYiKSkNCgkJZXhjZXB0OnBhc3MNCgkJCQ0KCSMjIy0tLS0tLS0tLS1bIERVTVAgS09NRU5UQVIgXS0tLS0tLS0tLS0gIyMjDQoJZGVmIER1bXBfS29tZW50YXIoc2VsZix1cmwpOg0KCQl0cnk6DQoJCQlkYXRhID0gcGFyc2VyKHNlcy5nZXQodXJsKS50ZXh0LCJodG1sLnBhcnNlciIpDQoJCQlmb3IgaXNpIGluIGRhdGEuZmluZF9hbGwoImgzIik6DQoJCQkJZm9yIGlkcyBpbiBpc2kuZmluZF9hbGwoImEiLGhyZWY9VHJ1ZSk6DQoJCQkJCWlmICJwcm9maWxlLnBocCIgaW4gaWRzLmdldCgiaHJlZiIpOnVpZCA9IGlkcy5nZXQoImhyZWYiKS5zcGxpdCgnPScpWzFdLnJlcGxhY2UoIiZyZWZpZCIsIiIpDQoJCQkJCWVsc2U6dWlkID0gcmUuZmluZGFsbCgiLyguKj8pP19fIixpZHNbImhyZWYiXSlbMF0uIHJlcGxhY2UoIj9yZWZpZD01MiYiLCIiKQ0KCQkJCQluYW1hID0gaWRzLnRleHQNCgkJCQkJaWYgdWlkKyI8PT4iK25hbWEgaW4gdGFtcHVuZzpwYXNzDQoJCQkJCWVsc2U6dGFtcHVuZy5hcHBlbmQodWlkKyI8PT4iK25hbWEpDQoJCQkJCWNvbnNvbGUucHJpbnQoZiIge0gyfeKAoiB7UDJ9c2VkYW5nIHByb3NlcyBtZW5ndW1wdWxrYW4gaWQsIGJlcmhhc2lsIG1lbmRhcGF0a2FuIHtsZW4odGFtcHVuZyl9IGlkLi4uLiIsIGVuZD0iXHIiKQ0KCQkJZm9yIHogaW4gZGF0YS5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCgkJCQlpZiAiTGloYXQga29tZW50YXIgc2ViZWx1bW55YeKApiIgaW4gei50ZXh0Og0KCQkJCQlzZWxmLkR1bXBfS29tZW50YXIoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIrelsiaHJlZiJdKQ0KCQlleGNlcHQ6cGFzcw0KCQkNCgkjIyMtLS0tLS0tLS0tWyBEVU1QIFBFTkNBUklBTiBOQU1BIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBEdW1wX1BlbmNhcmlhbihzZWxmLHVybCk6DQoJCXRyeToNCgkJCWRhdGEgPSBwYXJzZXIoc2VzLmdldChzdHIodXJsKSkudGV4dCwnaHRtbC5wYXJzZXInKQ0KCQkJZm9yIHogaW4gZGF0YS5maW5kX2FsbCgidGQiKToNCgkJCQluYW1wID0gcmUuZmluZGFsbCgnXDxhXCBocmVmXD1cIlwvKC4qPylcIj5cPGRpdlwgY2xhc3NcPVwiLio/XCI+XDxkaXZcIGNsYXNzXD1cIi4qP1wiPiguKj8pPFwvZGl2XD4nLHN0cih6KSkNCgkJCQlmb3IgdWlkLG5hbWEgaW4gbmFtcDoNCgkJCQkJaWYgInByb2ZpbGUucGhwPyIgaW4gdWlkOnVpZCA9IHJlLmZpbmRhbGwoImlkPSguKikiLHN0cih1aWQpKVswXQ0KCQkJCQllbGlmICI8c3BhbiIgaW4gbmFtYTpuYW1hID0gcmUuZmluZGFsbCgiKC4qPylcPCIsc3RyKG5hbWEpKVswXQ0KCQkJCQlpZiB1aWQrIjw9PiIrbmFtYSBpbiB0YW1wdW5nOnBhc3MNCgkJCQkJZWxzZTp0YW1wdW5nLmFwcGVuZCh1aWQrIjw9PiIrbmFtYSkNCgkJCQkJY29uc29sZS5wcmludChmIiB7SDJ94oCiIHtQMn1zZWRhbmcgcHJvc2VzIG1lbmd1bXB1bGthbiBpZCwgYmVyaGFzaWwgbWVuZGFwYXRrYW4ge2xlbih0YW1wdW5nKX0gaWQuLi4uIiwgZW5kPSJcciIpDQoJCQlmb3IgeCBpbiBkYXRhLmZpbmRfYWxsKCJhIixocmVmPVRydWUpOg0KCQkJCWlmICJMaWhhdCBIYXNpbCBTZWxhbmp1dG55YSIgaW4geC50ZXh0Og0KCQkJCQlzZWxmLkR1bXBfUGVuY2FyaWFuKHguZ2V0KCJocmVmIikpDQoJCWV4Y2VwdDpwYXNzDQoJCQ0KCSMjIy0tLS0tLS0tLS1bIERVTVAgTUVNQkVSIEdSVVAgXS0tLS0tLS0tLS0gIyMjDQoJZGVmIER1bXBfTWVtYmVyR3J1cChzZWxmLHVybCk6DQoJCXRyeToNCgkJCWRhdGEgPSBwYXJzZXIoc2VzLmdldCh1cmwsY29va2llcz1zZWxmLmNvb2tpZSxoZWFkZXJzPXsidXNlci1hZ2VudCI6ICJNb3ppbGxhLzUuMCAoU3ltYmlhbk9TLzkuMzsgU2VyaWVzNjAvMy4yIE5va2lhRTUyLTEvMDUyLjAwMzsgUHJvZmlsZS9NSURQLTIuMSBDb25maWd1cmF0aW9uL0NMREMtMS4xICkgQXBwbGVXZWJLaXQvNTI1IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi8zLjAgQnJvd3Nlck5HLzcuMi42LjIgM2dwcC1nYmEifSkudGV4dCwgImh0bWwucGFyc2VyIikNCgkJCWp1ZHVsID0gcmUuZmluZGFsbCgiPHRpdGxlPiguKj8pPC90aXRsZT4iLHN0cihkYXRhKSlbMF0NCgkJCWZvciBpc2kgaW4gZGF0YS5maW5kX2FsbCgiaDMiKToNCgkJCQlmb3IgaWRzIGluIGlzaS5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCgkJCQkJaWYgInByb2ZpbGUucGhwIiBpbiBpZHMuZ2V0KCJocmVmIik6dWlkID0gaWRzLmdldCgiaHJlZiIpLnNwbGl0KCI9IilbMV0ucmVwbGFjZSgiJmVhdiIsIiIpO25hbWEgPSBpZHMudGV4dA0KCQkJCQllbHNlOg0KCQkJCQkJaWYgaWRzLnRleHQ9PWp1ZHVsOnBhc3MNCgkJCQkJCWVsc2U6dWlkID0gaWRzLmdldCgiaHJlZiIpLnNwbGl0KCIvIilbMV0uc3BsaXQoIj8iKVswXTtuYW1hID0gaWRzLnRleHQNCgkJCQkJaWYgdWlkKyI8PT4iK25hbWEgaW4gdGFtcHVuZzpwYXNzDQoJCQkJCWVsc2U6dGFtcHVuZy5hcHBlbmQodWlkKyI8PT4iK25hbWEpDQoJCQkJCWNvbnNvbGUucHJpbnQoZiIge0gyfeKAoiB7UDJ9c2VkYW5nIHByb3NlcyBtZW5ndW1wdWxrYW4gaWQsIGJlcmhhc2lsIG1lbmRhcGF0a2FuIHtsZW4odGFtcHVuZyl9IGlkLi4uLiIsIGVuZD0iXHIiKQ0KCQkJZm9yIHggaW4gZGF0YS5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToNCgkJCQlpZiAiTGloYXQgUG9zdGluZ2FuIExhaW5ueWEiIGluIHgudGV4dDoNCgkJCQkJc2VsZi5EdW1wX01lbWJlckdydXAoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIreC5nZXQoImhyZWYiKSkNCgkJZXhjZXB0OnBhc3MNCgkJDQoJIyMjLS0tLS0tLS0tLVsgRFVNUCBGSUxFIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBEdW1wX0ZpbGUoc2VsZixsb2spOg0KCQl0cnk6DQoJCQlmaWxlID0gb3Blbihsb2ssInIiKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoJCQlmb3IgeiBpbiBmaWxlOg0KCQkJCXRhbXB1bmcuYXBwZW5kKHopDQoJCWV4Y2VwdDpwYXNzDQoJCQ0KCSMjIy0tLS0tLS0tLS1bIERVTVAgRklMRSBdLS0tLS0tLS0tLSAjIyMNCglkZWYgRHVtcF9FbWFpbChzZWxmLG5hbWEsbGltaXQpOg0KCQl0cnk6DQoJCQlmb3IgeiBpbiByYW5nZShpbnQobGltaXQpKToNCgkJCQllbWFpbCA9IG5hbWErc3RyKHopKyJAZ21haWwuY29tPD0+IituYW1hDQoJCQkJaWYgZW1haWwgaW4gdGFtcHVuZzpwYXNzDQoJCQkJZWxzZTp0YW1wdW5nLmFwcGVuZChlbWFpbCkNCgkJZXhjZXB0OnBhc3MNCg0KIyMjLS0tLS0tLS0tLVsgQkFHSUFOIENSQUNLIF0tLS0tLS0tLS0tICMjIw0KY2xhc3MgQ3JhY2s6DQoJDQoJIyMjLS0tLS0tLS0tLVsgRlVOQ1RJT04gSU5JVCBdLS0tLS0tLS0tLSAjIyMNCglkZWYgX19pbml0X18oc2VsZik6DQoJCXNlbGYubG9vcCA9IDANCgkJc2VsZi5vayA9IFtdDQoJCXNlbGYuY3AgPSBbXQ0KCQlzZWxmLmhhcmlfaW5pID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVkLSVCLSVZIikNCgkJDQoJIyMjLS0tLS0tLS0tLVsgQVRVUiBTQU5ESSBEQU4gTUVUT0RFIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBhdHVyc2FuZGkoc2VsZik6DQoJCXByaW50cyhQYW5lbChmIiIie1AyfSAgICBiZXJoYXNpbCBtZW5ndW1wdWxrYW4ge2xlbih0YW1wdW5nKX0gaWQiIiIsd2lkdGg9ODcscGFkZGluZz0oMCwyMSksc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCXNldCA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKAoiB7UDJ9YXBha2FoIGthbXUgaW5naW4gbWVuZ2d1bmFrYW4gc2FuZGkgbWFudWFsPyh5L24pIDogIikNCgkJDQoJCSMjIy0tLS0tLS0tLS1bIFNBTkRJIE1BTlVBTCBdLS0tLS0tLS0tLSAjIyMNCgkJaWYgc2V0IGluWyJZIiwieSJdOg0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9c2lsYWhrYW4gYnVhdCBrYXRhc2FuZGkgZGVuZ2FuICwgKGtvbWEpIHNlYmFnYWkgcGVtaXNhaCB0aWFwIGthdGFzYW5kaSIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJCXB3eCA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKAoiB7UDJ9YnVhdCBrYXRhc2FuZGkgOiAiKS5zcGxpdCgiLCIpDQoJCQlpZiBsZW4ocHd4KTw9NToNCgkJCQlwcmludHMoUGFuZWwoZiIiIntNMn1rYXRhc2FuZGkgaGFydXMgbWluaW1hbCA2IGh1cnVmIiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQkJCWV4aXQoKQ0KCQkJc2VsZi5tYW51YWwocHd4KQ0KCQkNCgkJIyMjLS0tLS0tLS0tLVsgU0FOREkgT1RPTUFUSVMgXS0tLS0tLS0tLS0gIyMjDQoJCWVsc2U6DQoJCQlzZWxmLm90b21hdGlzKCkNCgkJDQoJIyMjLS0tLS0tLS0tLVsgQ1JBQ0sgTUFOVUFMIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBtYW51YWwoc2VsZixwdyk6DQoJCWdsb2JhbCBwcm9nLGRlcw0KCQlwcm9nID0gUHJvZ3Jlc3MoU3Bpbm5lckNvbHVtbignY2xvY2snKSxUZXh0Q29sdW1uKCd7dGFzay5kZXNjcmlwdGlvbn0nKSxCYXJDb2x1bW4oKSxUZXh0Q29sdW1uKCd7dGFzay5wZXJjZW50YWdlOi4wZn0lIF0nKSkNCgkJZGVzID0gcHJvZy5hZGRfdGFzaygnJyx0b3RhbD1sZW4odGFtcHVuZykpDQoJCXdpdGggcHJvZzoNCgkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBmYWxsOg0KCQkJCXNlbGYuc2ltcGFuX2hhc2lsKCkNCgkJCQlmb3IgZGF0YSBpbiB0YW1wdW5nOg0KCQkJCQl1c2VyID0gZGF0YS5zcGxpdCgiPD0+IilbMF0NCgkJCQkJbmFtYSA9IGRhdGEuc3BsaXQoIjw9PiIpWzFdDQoJCQkJCXB3eCA9IHB3DQoJCQkJCWZhbGwuc3VibWl0KHNlbGYubWV0b2RlX2FwaSx1c2VyLHB3eCkNCgkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9ICAgYmVyaGFzaWwgY3JhY2sgdG90YWwge2xlbih0YW1wdW5nKX0gaWQsIGRlbmdhbiBoYXNpbCBPSyA6IHtIMn17bGVuKHNlbGYub2spfXtQMn0gQ1AgOiB7SzJ9e2xlbihzZWxmLmNwKX17UDJ9IiIiLHdpZHRoPTg3LHBhZGRpbmc9KDAsOCksc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCXN5cy5leGl0KCkNCgkJCQkJCQ0KCSMjIy0tLS0tLS0tLS1bIENSQUNLIE9UT01BVElTIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBvdG9tYXRpcyhzZWxmKToNCgkJZ2xvYmFsIHByb2csZGVzDQoJCXByb2cgPSBQcm9ncmVzcyhUZXh0Q29sdW1uKCd7dGFzay5kZXNjcmlwdGlvbn0nKSxCYXJDb2x1bW4oKSxUZXh0Q29sdW1uKCd7dGFzay5wZXJjZW50YWdlOi4wZn0lIF0nKSkNCgkJZGVzID0gcHJvZy5hZGRfdGFzaygnJyx0b3RhbD1sZW4odGFtcHVuZykpDQoJCXdpdGggcHJvZzoNCgkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBmYWxsOg0KCQkJCXNlbGYuc2ltcGFuX2hhc2lsKCkNCgkJCQlmb3IgZGF0YSBpbiB0YW1wdW5nOg0KCQkJCQl0cnk6DQoJCQkJCQlwd3ggPSBbXQ0KCQkJCQkJdXNlciA9IGRhdGEuc3BsaXQoIjw9PiIpWzBdDQoJCQkJCQluYW1hID0gZGF0YS5zcGxpdCgiPD0+IilbMV0NCgkJCQkJCWRlcGFuID0gbmFtYS5zcGxpdCgiICIpWzBdDQoJCQkJCQlpZiBsZW4obmFtYSk8PTU6DQoJCQkJCQkJaWYgbGVuKGRlcGFuKTwzOg0KCQkJCQkJCQlwYXNzIA0KCQkJCQkJCWVsc2U6DQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjEyMyIpDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjMyMSIpDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjEyMzQiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIxMjM0NSIpDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjAxIikNCgkJCQkJCQkJcHd4LmFwcGVuZChkZXBhbisiMDIiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIwMyIpDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjA0IikNCgkJCQkJCQkJcHd4LmFwcGVuZChkZXBhbisiMDUiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIwNiIpDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjA3IikgDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjA4IikgDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjA5IikgDQoJCQkJCQkJCQ0KCQkJCQkJZWxzZToNCgkJCQkJCQlpZiBsZW4oZGVwYW4pPDM6DQoJCQkJCQkJCXB3eC5hcHBlbmQobmFtYSkNCgkJCQkJCQkJcHd4LmFwcGVuZChuYW1hKyIxMjMiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKG5hbWErIjMyMSIpDQoJCQkJCQkJZWxzZToNCgkJCQkJCQkJcHd4LmFwcGVuZChuYW1hKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIxMjMiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIzMjEiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIxMjM0IikNCgkJCQkJCQkJcHd4LmFwcGVuZChkZXBhbisiMTIzNDUiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIwMSIpDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjAyIikNCgkJCQkJCQkJcHd4LmFwcGVuZChkZXBhbisiMDMiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIwNCIpDQoJCQkJCQkJCXB3eC5hcHBlbmQoZGVwYW4rIjA1IikNCgkJCQkJCQkJcHd4LmFwcGVuZChkZXBhbisiMDYiKQ0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIwNyIpIA0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIwOCIpIA0KCQkJCQkJCQlwd3guYXBwZW5kKGRlcGFuKyIwOSIpIA0KCQkJCQkJZmFsbC5zdWJtaXQoc2VsZi5tZXRvZGVfYXBpLHVzZXIscHd4KQ0KCQkJCQlleGNlcHQ6DQoJCQkJCQlmYWxsLnN1Ym1pdChzZWxmLm1ldG9kZV9hcGksdXNlcixwd3gpDQoJCXByaW50cyhQYW5lbChmIiIie1AyfSAgIGJlcmhhc2lsIGNyYWNrIHRvdGFsIHtsZW4odGFtcHVuZyl9IGlkLCBkZW5nYW4gaGFzaWwgT0sgOiB7SDJ9e2xlbihzZWxmLm9rKX17UDJ9IENQIDoge0syfXtsZW4oc2VsZi5jcCl9e1AyfSIiIix3aWR0aD04NyxwYWRkaW5nPSgwLDgpLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlzeXMuZXhpdCgpDQoJCQkJCQkJDQoJIyMjLS0tLS0tLS0tLVsgTUVUT0RFIEFQSSBdLS0tLS0tLS0tLSAjIyMNCglkZWYgbWV0b2RlX2FwaShzZWxmLGVtYWlsLHB3eCk6DQoJCXByb2cudXBkYXRlKGRlcyxkZXNjcmlwdGlvbj1mIiB7SDJ94oCiIHtQMn1be0gyfUZBTEwtWER7UDJ9XSB7UDJ9W3tQMn17c3RyKHNlbGYubG9vcCl9e1AyfS97UDJ9e2xlbih0YW1wdW5nKX17UDJ9XXtQMn0gW09LIDoge0gyfXtsZW4oc2VsZi5vayl9e1AyfSBDUCA6IHtLMn17bGVuKHNlbGYuY3ApfXtQMn1dIFsiKQ0KCQlwcm9nLmFkdmFuY2UoZGVzKQ0KCQl0cnk6DQoJCQlmb3IgcHcgaW4gcHd4Og0KCQkJCXB3ID0gcHcubG93ZXIoKQ0KCQkJCXVhPXJhbmRvbS5jaG9pY2UobmdlbnRvdHQpDQoJCQkJcGFyYW1zID0gew0KCQkJCQkiYWNjZXNzX3Rva2VuIjogIjIwMDQyNDQyMzY1MTA4MnwyYTk5MThjNmJjZDc1Yjk0Y2VmY2JiNTYzNWM2YWQxNiIsDQoJCQkJCSJzZGtfdmVyc2lvbiI6IHtyYW5kb20ucmFuZGludCgxLDI2KX0sIA0KCQkJCQkiZW1haWwiOiBlbWFpbCwNCgkJCQkJImxvY2FsZSI6ICJlbl9VUyIsDQoJCQkJCSJwYXNzd29yZCI6IHB3LA0KCQkJCQkic2RrIjogImFuZHJvaWQiLA0KCQkJCQkiZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzIjogIjEiLA0KCQkJCQkic2lnIjogIjRmNjQ4ZjIxZmI1OGZjZDJhYTFjNjVmMzVmNDQxZWY1Ig0KCQkJCX0NCgkJCQloZWFkZXJzID0gew0KCQkJCQkiSG9zdCI6ICJncmFwaC5mYWNlYm9vay5jb20iLA0KCQkJCQkieC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMDAwMCwgMzAwMDAwMDApKSwNCgkJCQkJIngtZmItc2ltLWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwNCgkJCQkJIngtZmItbmV0LWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwNCgkJCQkJIngtZmItY29ubmVjdGlvbi1xdWFsaXR5IjogIkVYQ0VMTEVOVCIsDQoJCQkJCSJ1c2VyLWFnZW50IjogdWEsDQoJCQkJCSJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwNCgkJCQkJIngtZmItaHR0cC1lbmdpbmUiOiAiTGlnZXIiDQoJCQkJfQ0KCQkJCXBvc3QgPSBzZXMucG9zdCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vYXV0aC9sb2dpbiIscGFyYW1zPXBhcmFtcywgaGVhZGVycz1oZWFkZXJzLCBhbGxvd19yZWRpcmVjdHM9RmFsc2UpDQoJCQkJaWYgInNlc3Npb25fa2V5IiBpbiBwb3N0LnRleHQgYW5kICJFQUEiIGluIHBvc3QudGV4dDoNCgkJCQkJY29raSA9ICI7Ii5qb2luKGlbIm5hbWUiXSsiPSIraVsidmFsdWUiXSBmb3IgaSBpbiBwb3N0Lmpzb24oKVsic2Vzc2lvbl9jb29raWVzIl0pDQoJCQkJCXVzZXIgPSByZS5maW5kYWxsKCJjX3VzZXI9KFxkKykiLGNva2kpWzBdDQoJCQkJCWlmIHVzZXIgaW4gc2VsZi5vayBvciB1c2VyIGluIHNlbGYuY3A6DQoNCgkJCQkJCWJyZWFrDQoJCQkJCWVsc2U6DQoJCQkJCQlzZWxmLm9rLmFwcGVuZCh1c2VyKQ0KCQkJCQkJdHJlZSA9IFRyZWUoIiAiLGd1aWRlX3N0eWxlPWYie2NvbG9yX29rfSIpDQoJCQkJCQl0cmVlLmFkZChQYW5lbChmIntIMn0gICAgICAgU3VjY2VzLUxvZ2lue1AyfSIsd2lkdGg9MzAscGFkZGluZz0oMCwyKSxzdHlsZT1mIntjb2xvcl9va30iKSkNCgkJCQkJCXRyZWUuYWRkKGYiXHJ7UDJ9VXNlciBJRCB7UDJ9ICA6IHtIMn17dXNlcn0iKQ0KCQkJCQkJdHJlZS5hZGQoZiJ7UDJ9UGFzc3dvcmQge1AyfSA6IHtIMn17cHd9IikNCgkJCQkJCXRyZWUuYWRkKFBhbmVsKGYie0gyfXtjb2tpfXtQMn0iLHdpZHRoPTgzLHBhZGRpbmc9KDAsMiksc3R5bGU9ZiJ7Y29sb3Jfb2t9IikpDQoJCQkJCQl0cmVlLmFkZChQYW5lbChmIntIMn17dWF9e1AyfSIsd2lkdGg9ODMscGFkZGluZz0oMCwyKSxzdHlsZT1mIntjb2xvcl9va30iKSkNCgkJCQkJCXByaW50cyh0cmVlKQ0KCQkJCQkJDQoJCQkJCQkjcHJpbnQoJ1xuJykNCgkJCQkJCSNDb25zb2xlKHdpZHRoPTg3KS5wcmludChQYW5lbChmIltib2xkIGdyZWVuXXtjb2tpfSIsIHN0eWxlPSdib2xkIGdyZWVuJyksanVzdGlmeT0nbGVmdCcpDQoJCQkJCQkjcHJpbnQoJ1xuJykNCgkJCQkJCW9wZW4oZiJPSy97c2VsZi5oYXJpX2luaX0udHh0IiwiYSIpLndyaXRlKGYie3VzZXJ9fHtwd318e2Nva2l9XG4iKQ0KCQkJCQkJYnJlYWsNCgkJCQllbGlmICJVc2VyIG11c3QgdmVyaWZ5IHRoZWlyIGFjY291bnQiIGluIHBvc3QudGV4dDoNCgkJCQkJdXNlciA9IHBvc3QuanNvbigpWyJlcnJvciJdWyJlcnJvcl9kYXRhIl1bInVpZCJdDQoJCQkJCWlmIHVzZXIgaW4gc2VsZi5vayBvciB1c2VyIGluIHNlbGYuY3A6DQoJCQkJCQlicmVhaw0KCQkJCQllbHNlOg0KCQkJCQkJc2VsZi5jcC5hcHBlbmQodXNlcikNCgkJCQkJCXRyZWUgPSBUcmVlKCIgIixndWlkZV9zdHlsZT1mIntjb2xvcl9jcH0iKQ0KCQkJCQkJdHJlZS5hZGQoUGFuZWwoZiJ7SzJ9ICAgQ2hlY2twb2ludC1Mb2dpbntQMn0iLHdpZHRoPTMwLHBhZGRpbmc9KDAsMiksc3R5bGU9ZiJ7Y29sb3JfY3B9IikpDQoJCQkJCQl0cmVlLmFkZChmIlxye1AyfVVzZXIgSUQge1AyfSAgICAgOiB7SzJ9e3VzZXJ9IikNCgkJCQkJCXRyZWUuYWRkKGYie1AyfVBhc3N3b3JkIHtQMn0gICAgOiB7SzJ9e3B3fSIpDQoJCQkJCQl0cmVlLmFkZChQYW5lbChmIntLMn17dWF9e1AyfSIsd2lkdGg9ODMscGFkZGluZz0oMCwyKSxzdHlsZT1mIntjb2xvcl9jcH0iKSkNCgkJCQkJCXByaW50cyh0cmVlKQ0KCQkJCQkJb3BlbihmIkNQL3tzZWxmLmhhcmlfaW5pfS50eHQiLCJhIikud3JpdGUoZiJ7dXNlcn18e3B3fVxuIikNCgkJCQkJCWJyZWFrDQoJCQkJZWxpZiAiQ2FsbHMgdG8gdGhpcyBhcGkgaGF2ZSBleGNlZWRlZCB0aGUgcmF0ZSBsaW1pdC4gKDYxMykiIGluIHBvc3QudGV4dDoNCgkJCQkJcHJvZy51cGRhdGUoZGVzLGRlc2NyaXB0aW9uPWYiIHtIMn3igKJ7UDJ9IGNyYWNrIHtNMn1zcGFte1AyfSB7c3RyKHNlbGYubG9vcCl9L3tsZW4odGFtcHVuZyl9IE9LIDoge0gyfXtsZW4oc2VsZi5vayl9e1AyfSBDUCA6IHtLMn17bGVuKHNlbGYuY3ApfXtQMn0iKQ0KCQkJCQlwcm9nLmFkdmFuY2UoZGVzKQ0KCQkJCQl0aW1lLnNsZWVwKDMwKQ0KCQkJCWVsc2U6Y29udGludWUNCgkJZXhjZXB0IENvbm5lY3Rpb25FcnJvcjoNCgkJCXRpbWUuc2xlZXAoMzApDQoJCQlzZWxmLm1ldG9kZV9hcGkodXNlcixwd3gpDQoJCXNlbGYubG9vcCArPTENCg0KCSMjIy0tLS0tLS0tLS1bIFBSSU5UIFNJTVBBTiBIQVNJTCBdLS0tLS0tLS0tLSAjIyMNCglkZWYgc2ltcGFuX2hhc2lsKHNlbGYpOg0KCQlwcmludHMoUGFuZWwoZiIiIlxyICAgICB7UDJ9aGFzaWwgY3JhY2sge0gyfW9re1AyfSB0ZXJzaW1wYW4ga2UgOiB7SDJ9T0sve3NlbGYuaGFyaV9pbml9LnR4dHtQMn0NCntQMn0gICAgIGhhc2lsIGNyYWNrIHtLMn1jcCB7UDJ9dGVyc2ltcGFuIGtlIDoge0syfUNQL3tzZWxmLmhhcmlfaW5pfS50eHR7UDJ9IiIiLHdpZHRoPTg3LHBhZGRpbmc9KDAsMTApLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlwcmludHMoUGFuZWwoZiIiIlxyICAgICB7UDJ9SmlrYSBUaWRhayBBZGEgSGFzaWwgSGlkdXBrYW4gTW9kZSBQZXNhd2F0IDUgRGV0aWsge0syfSEhISIiIix3aWR0aD04NyxwYWRkaW5nPSgwLDEwKSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCiAgICAgICAgICANCiMjIy0tLS0tLS0tLS1bIE1FTlUgTEFJTiBdLS0tLS0tLS0tLSAjIyMNCmNsYXNzIExhaW46DQoJDQoJIyMjLS0tLS0tLS0tLVsgRlVOQ1RJT04gSU5JVCBdLS0tLS0tLS0tLSAjIyMNCglkZWYgX19pbml0X18oc2VsZixjb29raWUpOg0KCQlzZWxmLmNvb2tpZSA9IGNvb2tpZQ0KCQlzZWxmLmZpbGUgPSBbXQ0KCQlzZWxmLmxpc3RmaWxlID0gW10NCgkJDQoJIyMjLS0tLS0tLS0tLVsgTUVOVSBdLS0tLS0tLS0tLSAjIyMNCglkZWYgbWVudShzZWxmKToNCgkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9W3tjb2xvcl90ZXh0fTAxe1AyfV0uIGxpaGF0IGFrdW4gaGFzaWwgY3JhY2sgIFt7Y29sb3JfdGV4dH0wNHtQMn1dLiBnYW50aSB3YXJuYSB0ZW1hIHRvb2xzDQpbe2NvbG9yX3RleHR9MDJ7UDJ9XS4gZ2V0IGluZm8gYWt1biB0YXJnZXQgICAgW3tjb2xvcl90ZXh0fTA1e1AyfV0uIHRhbXBpbGthbiBpbmZvIGNvb2tpZXMNClt7Y29sb3JfdGV4dH0wM3tQMn1dLiBzZXR0aW5nIHVzZXIgYWdlbnQgICAgICBbe2NvbG9yX3RleHR9MDZ7UDJ9XS57SDJ9IEtlbWJhbGkge1AyfSkiIiIsd2lkdGg9ODcscGFkZGluZz0oMCw3KSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJbWVudSA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKAoiB7UDJ9cGlsaWggbWVudSA6ICIpDQoJCWlmIG1lbnUgaW5bIjAxIiwiMSJdOg0KCQkJc2VsZi5jZWtfaGFzaWwoKQ0KCQllbGlmIG1lbnUgaW5bIjA0IiwiNCJdOg0KCQkJZXhpdChwcmludHMoUGFuZWwoZiIiIntNMn3wn5mPIG1vaG9uIG1hYWYgZml0dXIgaW5pIHNlZGFuZyBkYWxhbSB0YWhhcCBwZXJiYWlrYW4iIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpKQ0KCQllbGlmIG1lbnUgaW5bIjA1IiwiNSJdOg0KCQkJc2VsZi50YW1waWxfY29va2llKCkNCgkJZWxpZiBtZW51IGluWyIwNiIsIjYiXToNCgkJCU1lbnUoKS5tZW51KCkNCgkJCWV4aXQocHJpbnRzKFBhbmVsKGYiIiJ7SDJ9YmVyaGFzaWwgbWVuZ2hhcHVzIGNvb2tpZSwgc2lsYWhrYW4ga2V0aWsgdWxhbmcgcHl0aG9uIGhha2ktZmIucHkiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpKQ0KCQllbHNlOg0KCQkJZXhpdChwcmludHMoUGFuZWwoZiIiIntNMn3wn5mPIG1vaG9uIG1hYWYgZml0dXIgaW5pIHNlZGFuZyBkYWxhbSB0YWhhcCBwZXJiYWlrYW4iIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpKQ0KDQoJIyMjLS0tLS0tLS0tLVsgQ0VLIEhBU0lMIENSQUNLIF0tLS0tLS0tLS0tICMjIw0KCWRlZiBjZWtfaGFzaWwoc2VsZik6DQoJCXByaW50cyhQYW5lbChmIiIie1AyfVt7Y29sb3JfdGV4dH0wMXtQMn1dLiBsaWhhdCBha3VuIGhhc2lsIGNyYWNrIG9rDQpbe2NvbG9yX3RleHR9MDJ7UDJ9XS4gbGloYXQgYWt1biBoYXNpbCBjcmFjayBjcCIiIix3aWR0aD04NyxwYWRkaW5nPSgwLDIwKSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJYXNrID0gY29uc29sZS5pbnB1dChmIiB7SDJ94oCiIHtQMn1tYXN1a2FuIHBpbGloYW4gOiAiKQ0KCQlpZiBhc2sgaW5bIjEiLCIwMSJdOmZvbGRlciA9ICJPSyINCgkJZWxzZTpmb2xkZXIgPSAiQ1AiDQoJCQ0KCQkjIyMtLS0tLS0tLS0tWyBQSUxJSCBGSUxFIF0tLS0tLS0tLS0tICMjIw0KCQlkaXJzID0gb3MubGlzdGRpcihmb2xkZXIpDQoJCXByaW50cyhQYW5lbChmIiIie1AyfSBiZXJoYXNpbCBtZW5lbXVrYW4ge2xlbihkaXJzKX0gZmlsZSBoYXNpbCBjcmFjayBvayIiIix3aWR0aD04NyxwYWRkaW5nPSgwLDE1KSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJbnVtID0gMA0KCQlmb3IgZmlsIGluIGRpcnM6DQoJCQludW0gKz0gMQ0KCQkJc2VsZi5maWxlLmFwcGVuZChmaWwpDQoJCQl0b3RhbGFrdW4gPSBvcGVuKGYie2ZvbGRlcn0ve2ZpbH0iLCJyIikucmVhZCgpLnNwbGl0bGluZXMoKQ0KCQkJc2VsZi5saXN0ZmlsZS5hcHBlbmQoUGFuZWwoZiJ7UDJ9W3tjb2xvcl90ZXh0fTB7bnVtfXtQMn1dIix3aWR0aD0xMCx0aXRsZT1mIntQMn1ub21lciIsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCQlzZWxmLmxpc3RmaWxlLmFwcGVuZChQYW5lbChmIntQMn17ZmlsfSIsd2lkdGg9MzUsdGl0bGU9ZiJ7UDJ9dGFuZ2dhbCIsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCQlzZWxmLmxpc3RmaWxlLmFwcGVuZChQYW5lbChmIntQMn17bGVuKHRvdGFsYWt1bil9IGFrdW4iLHdpZHRoPTI4LHRpdGxlPWYie1AyfXRvdGFsIGFrdW4iLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQljb25zb2xlLnByaW50KENvbHVtbnMoc2VsZi5saXN0ZmlsZSkpDQoJCXByaW50cyhQYW5lbChmIiIie1AyfWthbXUgaGFueWEgcGVybHUgbWVtaWxpaCBkYW4gbWVtYXN1a2FuIG5vbWVyIGRhcmkgZmlsZSBjcmFjayBkaSBhdGFzIiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlyZXN1bHQgPSBjb25zb2xlLmlucHV0KGYiIHtIMn3igKIge1AyfW1hc3VrYW4gYW5na2EgOiAiKQ0KCQkNCgkJIyMjLS0tLS0tLS0tLVsgTVVMQUkgQ0VLIF0tLS0tLS0tLS0tICMjIw0KCQl0cnk6DQoJCQlmaWxlcyA9IHNlbGYuZmlsZVtpbnQocmVzdWx0KS0xXQ0KCQkJdG90YWxoYXNpbCA9IG9wZW4oZiJ7Zm9sZGVyfS97ZmlsZXN9IiwiciIpLnJlYWQoKS5zcGxpdGxpbmVzKCkNCgkJZXhjZXB0Og0KCQkJcHJpbnRzKFBhbmVsKGYiIiJ7TTJ9ZmlsZSB5YW5nIGFuZGEgbWFzdWthbiB0aWRhayB0ZXJzZWRpYSBhdGF1IGlucHV0IGthbXUgdGlkYWsgYmVuYXIiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCQlleGl0KCkNCgkJbmFtYV9maWxlID0gKGYie2ZpbGVzfSIpLnJlcGxhY2UoIi0iLCAiICIpLnJlcGxhY2UoIi50eHQiLCAiIikNCgkJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9bmFtYSBmaWxlIGhhc2lsIGNyYWNrIDoge25hbWFfZmlsZX0gZGFuIHRlcmRhcGF0IHRvdGFsIGFrdW4gOiB7bGVuKHRvdGFsaGFzaWwpfSIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJZm9yIGFrdW4gaW4gdG90YWxoYXNpbDoNCgkJCXVzZXIgPSBha3VuLnNwbGl0KCJ8IilbMF0NCgkJCXB3ID0gYWt1bi5zcGxpdCgifCIpWzFdDQoJCQl0cmVlID0gVHJlZSgiICIpDQoJCQlpZiBmb2xkZXI9PSJPSyI6DQoJCQkJY29va2llID0gYWt1bi5zcGxpdCgifCIpWzJdDQoJCQkJdHJlZS5hZGQoZiJccntIMn17dXNlcn18e3B3fXtQMn0gIikNCgkJCQl0cmVlLmFkZChmIntIMn17Y29va2llfXtQMn0iKQ0KCQkJZWxzZToNCgkJCQl0cmVlLmFkZChmIlxye0syfXt1c2VyfXx7cHd9e1AyfSAiKQ0KCQkJcHJpbnRzKHRyZWUpDQoJCXByaW50cyhQYW5lbChmIiIie1AyfSBiZXJoYXNpbCBtZW5nZWNlayBkYW4gbWVuZGFwYXRrYW4gdG90YWwge2xlbih0b3RhbGhhc2lsKX0gYWt1biBkYXJpIGZpbGUiIiIsd2lkdGg9ODcscGFkZGluZz0oMCw3KSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJZXhpdCgpDQoJCQ0KCSMjIy0tLS0tLS0tLS1bIEdBTlRJIFdBUk5BIFRFTUEgXS0tLS0tLS0tLS0gIyMjDQoJZGVmIGdhbnRpX3RlbWEoc2VsZik6DQoJCXByaW50cyhQYW5lbChmIiIie1AyfVt7Y29sb3JfdGV4dH0wMXtQMn1dLiBnYW50aSB3YXJuYSB0ZW1hIG1lcmFoICBbe2NvbG9yX3RleHR9MDZ7UDJ9XS4gZ2FudGkgd2FybmEgdGVtYSBwaW5rDQpbe2NvbG9yX3RleHR9MDJ7UDJ9XS4gZ2FudGkgd2FybmEgdGVtYSBoaWphdSAgW3tjb2xvcl90ZXh0fTA3e1AyfV0uIGdhbnRpIHdhcm5hIHRlbWEgY3lhbg0KW3tjb2xvcl90ZXh0fTAze1AyfV0uIGdhbnRpIHdhcm5hIHRlbWEga3VuaW5nIFt7Y29sb3JfdGV4dH0wOHtQMn1dLiBnYW50aSB3YXJuYSB0ZW1hIHB1dGloDQpbe2NvbG9yX3RleHR9MDR7UDJ9XS4gZ2FudGkgd2FybmEgdGVtYSBiaXJ1ICAgW3tjb2xvcl90ZXh0fTA5e1AyfV0uIGdhbnRpIHdhcm5hIHRlbWEgb3JhbmdlDQpbe2NvbG9yX3RleHR9MDV7UDJ9XS4gZ2FudGkgd2FybmEgdGVtYSB1bmd1ICAgW3tjb2xvcl90ZXh0fTEwe1AyfV0uIGdhbnRpIHdhcm5hIHRlbWEgYWJ1MiIiIix3aWR0aD04NyxwYWRkaW5nPSgwLDcpLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlhc2sgPSBjb25zb2xlLmlucHV0KGYiIHtIMn3igKIge1AyfXBpbGloIHRlbWEgOiAiKQ0KCQlpZiBhc2sgaW5bIjAxIiwiMSJdOndhcm5hID0gIlsjRkYwMDAwXSI7dGVrcz0ibWVyYWgiDQoJCWVsaWYgYXNrIGluWyIwMiIsIjIiXTp3YXJuYSA9ICJbIzAwRkYwMF0iO3Rla3M9ImhpamF1Ig0KCQllbGlmIGFzayBpblsiMDMiLCIzIl06d2FybmEgPSAiWyNGRkZGMDBdIjt0ZWtzPSJrdW5pbmciDQoJCWVsaWYgYXNrIGluWyIwNCIsIjQiXTp3YXJuYSA9ICJbIzAwQzhGRl0iO3Rla3M9ImJpcnUiDQoJCWVsaWYgYXNrIGluWyIwNSIsIjUiXTp3YXJuYSA9ICJbI0FGMDBGRl0iO3Rla3M9InVuZ3UiDQoJCWVsaWYgYXNrIGluWyIwNiIsIjYiXTp3YXJuYSA9ICJbI0ZGMDBGRl0iO3Rla3M9InBpbmsiDQoJCWVsaWYgYXNrIGluWyIwNyIsIjciXTp3YXJuYSA9ICJbIzAwRkZGRl0iO3Rla3M9ImN5YW4iDQoJCWVsaWYgYXNrIGluWyIwOCIsIjgiXTp3YXJuYSA9ICJbI0ZGRkZGRl0iO3Rla3M9InB1dGloIg0KCQllbGlmIGFzayBpblsiMDkiLCI5Il06d2FybmEgPSAiWyNGRjhGMDBdIjt0ZWtzPSJvcmFuZ2UiDQoJCWVsaWYgYXNrIGluWyIxMCJdOndhcm5hID0gIlsjQUFBQUFBXSI7dGVrcz0iYWJ1LWFidSINCgkJb3BlbigiZGF0YS90aGVtZV9jb2xvciIsInciKS53cml0ZSh3YXJuYSsifCIrd2FybmEucmVwbGFjZSgiWyIsIiIpLnJlcGxhY2UoIl0iLCIiKSkNCgkJcHJpbnRzKFBhbmVsKGYiIiJ7SDJ9YmVyaGFzaWwgbWVuZ2dhbnRpIHRlbWEga2Uge3Rla3N9LCBzaWxhaGthbiBtdWxhaSB1bGFuZyB0b29scyIiIix3aWR0aD04NyxwYWRkaW5nPSgwLDYpLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlzeXMuZXhpdCgpDQoJCQkNCgkjIyMtLS0tLS0tLS0tWyBUQU1QSUxLQU4gQ09PS0lFIF0tLS0tLS0tLS0tICMjIw0KCWRlZiB0YW1waWxfY29va2llKHNlbGYpOg0KCQlub3cgPSBkYXRldGltZS5ub3coKQ0KCQloYXJpID0gbm93LmRheStpbnQoMzApDQoJCWlmIGhhcmkgPiAzMDpoYXJpID0gaGFyaS0zMA0KCQlidWxhbiA9IG5vdy5tb250aCsxDQoJCWlmIGJ1bGFuID4gMTI6YnVsYW4gPSBidWxhbi0xMg0KCQlpZiBub3cubW9udGgrMSA+IDEyOnRhaHVuID0gbm93LnllYXIrMQ0KCQlkYXRhID0gZGF0ZSh5ZWFyPXRhaHVuLG1vbnRoPWJ1bGFuLGRheT1oYXJpKQ0KCQlha3RpZiA9IGRhdGEuc3RyZnRpbWUoIiVkICVCICVZIikNCgkJY29uc29sZS5wcmludChmIiB7SDJ94oCiIHtQMn1ha3RpZiBzYW1wYWkgOiB7YWt0aWZ9IikNCgkJcHJpbnRzKFBhbmVsKGYiIiJ7SDJ9e3NlbGYuY29va2llLmdldCgnY29va2llJyl9IiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlzeXMuZXhpdCgpDQoJCQ0KIyMjPT09PT09PT09PT09PT09PiBbT3BzaS1Ba3VuXSA8PT09PT09PT09PT09PT09PSMjIw0KaW1wb3J0IHJlcXVlc3RzLCBzaHV0aWwsIG9zLCByZSwgYnM0LCBzeXMsIGpzb24sIHRpbWUsIHBsYXRmb3JtICxyYW5kb20sIGRhdGV0aW1lLCBzdWJwcm9jZXNzLCBsb2dnaW5nLCBiYXNlNjQNCmltcG9ydCBobWFjLCBoYXNobGliLCB1cmxsaWIsIHN0ZGlvbWFzaywgdXJsbGliLnJlcXVlc3QsIHV1aWQNCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3INCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlcg0KZnJvbSB0aHJlYWRpbmcgaW1wb3J0IChUaHJlYWQsIEV2ZW50KQ0KZnJvbSB0aW1lIGltcG9ydCBzbGVlcCBhcyBqZWRhDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KDQpjdCA9IGRhdGV0aW1lLm5vdygpDQpuID0gY3QubW9udGgNCmJ1bGFuXyA9IFsnSmFudWFyeScsICdGZWJydWFyaScsICdNYXJldCcsICdBcHJpbCcsICdNZWknLCAnSnVuaScsICdKdWxpJywgJ0FndXN0dXMnLCAnU2VwdGVtYmVyJywgJ09rdG9iZXInLCAnTm92ZW1iZXInLCAnRGVzZW1iZXInXQ0KdHJ5Og0KCWlmIG4gPCAwIG9yIG4gPiAxMjoNCgkJZXhpdCgpDQoJblRlbXAgPSBuIC0gMQ0KZXhjZXB0IFZhbHVlRXJyb3I6DQoJZXhpdCgpDQoNCmN1cnJlbnQgPSBkYXRldGltZS5ub3coKQ0KaGFyaSA9IGN1cnJlbnQuZGF5DQpidWxhbiA9IGJ1bGFuX1tuVGVtcF0NCnRhaHVuID0gY3VycmVudC55ZWFyDQpidWxsYW4gPSBjdXJyZW50Lm1vbnRoDQoNCndha3R1ID0gKCIlcy0lcy0lcyIlKGhhcmksYnVsYW4sdGFodW4pKQ0KYnVsYW4xMiA9IHsiMDEiOiAiSmFudWFyeSIsICIwMiI6ICJGZWJydWFyaSIsICIwMyI6ICJNYXJldCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNZWkiLCAiMDYiOiAiSnVuaSIsICIwNyI6ICJKdWxpIiwgIjA4IjogIkFndXN0dXMiLCAiMDkiOiAiU2VwdGVtYmVyIiwgIjEwIjogIk9rdG9iZXIiLCAiMTEiOiAiTm92ZW1iZXIiLCAiMTIiOiAiRGVzZW1iZXIifQ0KDQpNID0gJ1x4MWJbMTs5MW0nICMgTUVSQUgNCkggPSAnXHgxYlsxOzkybScgIyBISUpBVQ0KSyA9ICdceDFiWzE7OTNtJyAjIEtVTklORw0KQiA9ICdceDFiWzE7OTRtJyAjIEJJUlUNClUgPSAnXHgxYlsxOzk1bScgIyBVTkdVDQpPID0gJ1x4MWJbMTs5Nm0nICMgQklSVSBNVURBDQpQID0gJ1x4MWJbMTs5N20nICMgUFVUSUgNCkogPSAnXDAzM1szODsyOzI1NTsxMjc7MDsxbScgIyBPUkFOR0UNCk4gPSAnXHgxYlswbScgIyBXQVJOQSBNQVRJDQphY2FrID0gW00sIEgsIEssIEIsIFUsIE8sIFAsIEpdDQp3YXJuYSA9IHJhbmRvbS5jaG9pY2UoYWNhaykNCnRpbCA9IlwwMzNbMG0aGiAiDQoNCmRlZiBqYWxhbihrZWxpbGluZyk6DQoJZm9yIG1hdSBpbiBrZWxpbGluZyArICdcbic6DQoJCXN5cy5zdGRvdXQud3JpdGUobWF1KQ0KCQlzeXMuc3Rkb3V0LmZsdXNoKCk7amVkYSgwLjAzKQ0KCQkNCgkJDQp1YmFoX3Bhc3MgPSBbXQ0KcHdiYXJ1ID0gW10NCnB3QmFydSA9IFtdDQp1YmFoUCA9IFtdDQoNCmRlZiBmaWxlX2NwKCk6DQoJZGlycyA9IG9zLmxpc3RkaXIoJ0NQJykNCglwcmludHMoUGFuZWwoZiIiIntQMn1jb3B5IG5hbWEgZmlsZSBoYXNpbCBjcmFjayBkaSBiYXdhaCBpbmkga2VtdWRpYW4gcGFzdGVrYW4gZGkgYmF3YWggdW50dWsgY2VrIG9wc2kiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJZm9yIGZpbGUgaW4gZGlyczoNCgkJcHJpbnRzKFBhbmVsKGYiIiJ7SzJ9eyhmaWxlKX0iIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJdHJ5Og0KCQlwcmludHMoUGFuZWwoZiIiIntQMn1jb3B5IG5hbWEgZmlsZSBkaSBhdGFzIGtlbXVkaWFuIHRlbXBlbCBkaSBiYXdhaCBpbmkgY29udG9oIHtNMn06IHtIMn17d2FrdHV9LnR4dCIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJb3BzaSgpDQoJZXhjZXB0IElPRXJyb3I6DQoJCXByaW50cyhQYW5lbChmIiIie00yfVRpZGFrIGFkYSBmaWxlIHVudHVrIGRpIGNlayBzaWxhaGthbiBjcmFjayBkdWx1IiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCQlNZW51KCkubWVudSgpDQoNCmRlZiBvcHNpKCk6DQoJQ1AgPSAoIkNQLyIpDQoJcm9taSA9IGNvbnNvbGUuaW5wdXQoZiIge0gyfeKspCB7UDJ9VGVtcGVsIGF0YXUgbWFzdWthbiBuYW1hIGZpbGUgeWFuZyBpbmdpbiBkaSBjZWsgZGlzaW5pIDogIikNCglpZiByb21pID09ICIiOg0KCQlwcmludHMoUGFuZWwoZiIiIntLMn1pc2kgeWFuZyBiZW5hciIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkNCgkJb3BzaSgpDQoJdHJ5Og0KCQlmaWxlX2NwID0gb3BlbihDUCtyb21pLCAiciIpLnJlYWRsaW5lcygpDQoJZXhjZXB0IElPRXJyb3I6DQoJCWV4aXQocHJpbnRzKFBhbmVsKGYiIiJ7UDJ9bmFtYSBmaWxle0syfSB7KHJvbWkpfSB7UDJ9dGlkYWsgZGkgdGVtdWthbiIiIix3aWR0aD04NyxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkpDQoJcHJpbnRzKFBhbmVsKGYiIiJ7UDJ9c2ViZWxlbSBtZWxhbmp1dGthbiBoaWR1cGthbiBtb2RlIHBlc2F3YXQgc2VsYW1hIDEwIGRldGlrIiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCXB3PWNvbnNvbGUuaW5wdXQoZiIge0gyfeKspCB7UDJ9dWJhaCBwYXNzd29yZCBrZXRpa2EgdGFiIHllcyB5L24gOiAiKQ0KCWlmIHB3IGluWyd5JywnWSddOg0KCQl1YmFoX3Bhc3MuYXBwZW5kKCJ1YmFoX3NhbmRpIikNCgkJcHcyPWNvbnNvbGUuaW5wdXQoZiIge0gyfeKspCB7UDJ9TWFzdWthbiBQYXNzd29yZCBiYXJ1IDp7SDJ9ICIpDQoJCWlmIGxlbihwdzIpIDw9IDU6DQoJCQlwcmludHMoUGFuZWwoZiIiIntLMn1TYW5kaSBtaW5pbWFsIDYga2FyYWt0ZXIiIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCWVsc2U6DQoJCQlwd2JhcnUuYXBwZW5kKHB3MikNCglwcmludHMoUGFuZWwoZiIiIntQMn1Ub3RhbCBha3VuIHtNMn06e0gyfSB7c3RyKGxlbihmaWxlX2NwKSl9IiIiLHdpZHRoPTg3LHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQ0KCW5vbW9yID0gMA0KCWZvciBmYiBpbiBmaWxlX2NwOg0KCQlha3VuID0gZmIucmVwbGFjZSgiXG4iLCIiKQ0KCQluZ2VjZWsgID0gYWt1bi5zcGxpdCgifCIpDQoJCW5vbW9yKz0xDQoJCSNwcmludCgiXG4lcyVzLiVzIFwwMzNbMG1sb2dpbiBha3VuICVzPiAlcyVzIiUoSCxzdHIobm9tb3IpLE8sTSxLLGFrdW4ucmVwbGFjZSgiICotLT4gIiwiIikpKTtqZWRhKDAuMDcpDQoJCXByaW50cyhQYW5lbChmIiIie1AyfVt7SDJ9eyhzdHIobm9tb3IpKX17UDJ9XSB7UDJ9Q2VrIHNlc2kgYWt1biB7SzJ9Pj0+IHtLMn17YWt1bn0iIiIsd2lkdGg9ODcsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpO2plZGEoMC4xMCkNCgkJdHJ5Og0KCQkJbWVuZ2VjZWsobmdlY2VrWzBdLnJlcGxhY2UoIiIsIiIpLCBuZ2VjZWtbMV0pDQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCgkJCWNvbnRpbnVlDQoJcHJpbnQoIlxuIikNCglDb25zb2xlKHdpZHRoPTMwKS5wcmludChQYW5lbChmIltib2xkIGdyZWVuXVNFTEVTQUkgTUVOR0VDRUsgT1BTSSIsIHN0eWxlPSdyZWQnKSxqdXN0aWZ5PSdsZWZ0JykNCgljb25zb2xlLmlucHV0KGYiIHtIMn3irKQge1AyfVRla2FuIEVudGVyIikNCgkjY29uc29sZS5pbnB1dCgiJXMlcyVzIFslcyBUZWthbiBFbnRlciBVbnR1ayBLZW1iYWxpJXMgXSAiJShVLHRpbCxPLFUsTykpDQoJTWVudSgpLm1lbnUoKQ0KCQ0KZGF0YSA9IHt9DQpkYXRhMiA9IHt9DQoNCmRlZiBtZW5nZWNlayh1c2VyLHB3KToNCglnbG9iYWwgbG9vcCx1YmFoX3Bhc3MscHdiYXJ1DQoJc2Vzc2lvbj1yZXF1ZXN0cy5TZXNzaW9uKCkNCgl1YSA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4xLjA7IFM0NUIpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85Ni4wLjQ2NjQuNDUgTW9iaWxlIFNhZmFyaS81MzcuMzYnDQoJdXJsID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSINCglzZXNzaW9uLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCJvcmlnaW4iOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIiwiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsInVzZXItYWdlbnQiOiB1YSwiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLCJ4LXJlcXVlc3RlZC13aXRoIjogIm1hcmsudmlhLmdwIiwic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLCJzZWMtZmV0Y2gtbW9kZSI6ICJuYXZpZ2F0ZSIsInNlYy1mZXRjaC11c2VyIjogIj8xIiwic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLCJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyJ9KQ0KCXNvdXA9YnM0LkJlYXV0aWZ1bFNvdXAoc2Vzc2lvbi5nZXQodXJsKyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IikudGV4dCwiaHRtbC5wYXJzZXIiKQ0KCWxpbms9c291cC5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSkNCglmb3IgeCBpbiBzb3VwKCJpbnB1dCIpOg0KCQlkYXRhLnVwZGF0ZSh7eC5nZXQoIm5hbWUiKTp4LmdldCgidmFsdWUiKX0pDQoJZGF0YS51cGRhdGUoeyJlbWFpbCI6dXNlciwicGFzcyI6cHd9KQ0KCXVybFBvc3Q9c2Vzc2lvbi5wb3N0KHVybCtsaW5rLmdldCgiYWN0aW9uIiksZGF0YT1kYXRhKQ0KCXJlc3BvbnNlPWJzNC5CZWF1dGlmdWxTb3VwKHVybFBvc3QudGV4dCwgImh0bWwucGFyc2VyIikNCglpZiAiY191c2VyIiBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKToNCgkJaWYgIkFrdW4gQW5kYSBEaWt1bmNpIiBpbiB1cmxQb3N0LnRleHQ6DQoJCQlwcmludCgiXHIlcyVzXDAzM1swbSBha3VuIHRlcmt1bmNpIHNlc2kgbmV3IiUoTSx0aWwpKQ0KCQllbHNlOg0KCQkJcHJpbnQoIlxyJXMlc1wwMzNbMG0gYWt1biB0aWRhayBjaGVja3BvaW50LCBzaWxhaGthbiBhbmRhIGxvZ2luICIlKHRpbCxIKSkNCgkJCW9wZW4oJ09LL09LLSVzLnR4dCclKHdha3R1KSwgJ2EnKS53cml0ZSgiICVzfCVzXG4iICUgKHVzZXIscHcpKQ0KCWVsaWYgImNoZWNrcG9pbnQiIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpOg0KCQljb2tpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQ0KCQl0aXRsZT1yZS5maW5kYWxsKCJcPHRpdGxlPiguKj8pPFwvdGl0bGU+IixzdHIocmVzcG9uc2UpKQ0KCQlsaW5rMj1yZXNwb25zZS5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSkNCgkJbGlzdElucHV0PVsnZmJfZHRzZycsJ2phem9lc3QnLCdjaGVja3BvaW50X2RhdGEnLCdzdWJtaXRbQ29udGludWVdJywnbmgnXQ0KCQlmb3IgeCBpbiByZXNwb25zZSgiaW5wdXQiKToNCgkJCWlmIHguZ2V0KCJuYW1lIikgaW4gbGlzdElucHV0Og0KCQkJCWRhdGEyLnVwZGF0ZSh7eC5nZXQoIm5hbWUiKTp4LmdldCgidmFsdWUiKX0pDQoJCWFuPXNlc3Npb24ucG9zdCh1cmwrbGluazIuZ2V0KCJhY3Rpb24iKSxkYXRhPWRhdGEyKQ0KCQlyZXNwb25zZTI9YnM0LkJlYXV0aWZ1bFNvdXAoYW4udGV4dCwiaHRtbC5wYXJzZXIiKQ0KCQljZWs9W2Nlay50ZXh0IGZvciBjZWsgaW4gcmVzcG9uc2UyLmZpbmRfYWxsKCJvcHRpb24iKV0NCgkJbnVtYmVyPTANCgkJcHJpbnQoIlxyJXMaGiVzIFwwMzNbMG0gdGVyZGFwYXQgJXMlcyVzIFwwMzNbMG1vcHNpICVzOiIlKFUsTyxQLHN0cihsZW4oY2VrKSksTyxNKSk7amVkYSgwLjA3KQ0KCQlpZihsZW4oY2VrKT09MCk6DQoJCQlpZiAiTGloYXQgZGV0YWlsIGxvZ2luIHlhbmcgZGl0YW1waWxrYW4uIEluaSBBbmRhPyIgaW4gdGl0bGU6DQoJCQkJaWYgInViYWhfc2FuZGkiIGluIHViYWhfcGFzczoNCgkJCQkJZGF0LGRhdDI9e30se30NCgkJCQkJYnV0PVsic3VibWl0W1llc10iLCJuaCIsImZiX2R0c2ciLCJqYXpvZXN0IiwiY2hlY2twb2ludF9kYXRhIl0NCgkJCQkJZm9yIHggaW4gcmVzcG9uc2UoImlucHV0Iik6DQoJCQkJCQlpZiB4LmdldCgibmFtZSIpIGluIGJ1dDoNCgkJCQkJCQlkYXQudXBkYXRlKHt4LmdldCgibmFtZSIpOnguZ2V0KCJ2YWx1ZSIpfSkNCgkJCQkJdWJhaFB3PXNlc3Npb24ucG9zdCh1cmwrbGluazIuZ2V0KCJhY3Rpb24iKSxkYXRhPWRhdCkudGV4dA0KCQkJCQlyZXNVYmFoPWJzNC5CZWF1dGlmdWxTb3VwKHViYWhQdywiaHRtbC5wYXJzZXIiKQ0KCQkJCQlsaW5rMz1yZXNVYmFoLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQ0KCQkJCQlidXQyPVsic3VibWl0W05leHRdIiwibmgiLCJmYl9kdHNnIiwiamF6b2VzdCJdDQoJCQkJCWlmICJCdWF0IEthdGEgU2FuZGkgQmFydSIgaW4gcmUuZmluZGFsbCgiXDx0aXRsZT4oLio/KTxcL3RpdGxlPiIsc3RyKHViYWhQdykpOg0KCQkJCQkJZm9yIGIgaW4gcmVzVWJhaCgiaW5wdXQiKToNCgkJCQkJCQlkYXQyLnVwZGF0ZSh7Yi5nZXQoIm5hbWUiKTpiLmdldCgidmFsdWUiKX0pDQoJCQkJCQlkYXQyLnVwZGF0ZSh7InBhc3N3b3JkX25ldyI6IiIuam9pbihwd2JhcnUpfSkNCgkJCQkJCWFuPXNlc3Npb24ucG9zdCh1cmwrbGluazMuZ2V0KCJhY3Rpb24iKSxkYXRhPWRhdDIpDQoJCQkJCQljb2tpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQ0KCQkJCQkJcHJpbnQoIlxyJXMlc1wwMzNbMG1ha3VuIG9uZSB0YWIsIHNhbmRpIGJlcmhhc2lsIGRpIHViYWggXG4aGiBPSyAlcyVzJXN8JXN8JXMJCQkiJShILHRpbCxOLEgsdXNlcixwd2JhcnVbMF0sY29raSkpDQoJCQkJCQlvcGVuKCdPSy9PSy0lcy50eHQnICUod2FrdHUpLCAnYScpLndyaXRlKCIlcyVzfCVzfCVzXG4iICUgKEgsdXNlcixwd2JhcnVbMF0sY29raSkpDQoJCQkJCQkjY2VrX2Fwayhjb2tpKQ0KCQkJCWVsc2U6DQoJCQkJCXByaW50KCJcciVzJXMgXDAzM1swbVx4MWJbMTs5Mm1DaGVja3BvaW50IFRlcmJ1a2EsIEFrdW4gVGFwIFllcyBTaWxhaGthbiBMb2dpbgkJIiUoSCx0aWwpKQ0KCQkJCQl0cmVlID0gVHJlZSgiICIsZ3VpZGVfc3R5bGU9ZiJ7Y29sb3Jfb2t9IikNCgkJCQkJdHJlZS5hZGQoUGFuZWwoZiJ7SDJ9e3VhfXtQMn0iLHdpZHRoPTgzLHBhZGRpbmc9KDAsMiksc3R5bGU9ZiJ7Y29sb3Jfb2t9IikpDQoJCQkJCXByaW50cyh0cmVlKQ0KCQkJCQlvcGVuKCdPSy9PSy0lcy50eHQnICUod2FrdHUpLCAnYScpLndyaXRlKCIlcyAlc3wlc3wlc1xuIiAlIChILHVzZXIscHcsY29raSkpDQoJCQkJCSNjZWtfYXBrKGNva2kpDQoJCQllbGlmICJNYXN1a2thbiBLb2RlIE1hc3VrIHVudHVrIE1lbGFuanV0a2FuIiBpbiByZS5maW5kYWxsKCJcPHRpdGxlPiguKj8pPFwvdGl0bGU+IixzdHIocmVzcG9uc2UpKToNCgkJCQlwcmludCgiXHIlcxoaXDAzM1swbSBha3VuIHRlcnBhc2FuZyBhdXRlbnRpa2FzaSBkdWEgZmFrdG9yCQkJIiUoTSkpDQoJCQllbHNlOg0KCQkJCXByaW50KCIlcyVzXDAzM1swbXRlcmphZGkga2VzYWxhaGFuIiUoTSx0aWwpKQ0KCQllbHNlOg0KCQkJaWYgImNfdXNlciIgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6DQoJCQkJcHJpbnQoIlxyJXMlcyBha3VuIHRpZGFrIGNoZWNrcG9pbnQsIHNpbGFoa2FuIGFuZGEgbG9naW4gIiUoSCkpDQoJCQkJb3BlbignT0svT0stJXMudHh0JyAlKHdha3R1KSwgJ2EnKS53cml0ZSgiJXMlc3wlc1xuIiAlIChILHVzZXIscHcpKQ0KCQlmb3Igb3BzaSBpbiByYW5nZShsZW4oY2VrKSk6DQoJCQludW1iZXIgKz0xDQoJCQlqYWxhbiAoIiAgJXMlcy4gJXMlcyIlKFAsc3RyKG51bWJlciksSyxjZWtbb3BzaV0pKQ0KCWVsaWYgImxvZ2luX2Vycm9yIiBpbiBzdHIocmVzcG9uc2UpOg0KCQlvaCA9IHJ1bi5maW5kKCJkaXYiLHsiaWQiOiJsb2dpbl9lcnJvciJ9KS5maW5kKCJkaXYiKS50ZXh0DQoJCXByaW50KCIlcxoaICVzIiUoTSxvaCkpDQoJZWxzZToNCgkJdHJlZSA9IFRyZWUoIiAiLGd1aWRlX3N0eWxlPWYie2NvbG9yX3BhbmVsfSIpDQoJCXRyZWUuYWRkKFBhbmVsKGYie08yfWxvZ2luIGdhZ2FsLCBzaWxhaGthbiBjZWsga2VtYmFsaSBpZCBkYW4ga2F0YSBzYW5kaXtQMn0iLHdpZHRoPTgzLHBhZGRpbmc9KDAsMiksc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpDQoJCXByaW50cyh0cmVlKQ0KCQkgIA0KZGVmIHNjYXJwcGluZ191YSgpOg0KICAgICMgVXJsICYgSGVhZGVycyB3ZWJzaXRlICMNCiAgICANCiAgICANCiAgICB1cmwgPSAiaHR0cHM6Ly9hcGkuYXBpbGF5ZXIuY29tL3VzZXJfYWdlbnQvZ2VuZXJhdGU/YW5kcm9pZD10cnVlJmNocm9tZT10cnVlIg0KICAgIGhlYWRlciA9IHsiYXBpa2V5IjogIjJaeFhualFCeUY2clB1M0dNNUR0Y0VtckpmS3FCNXhMIn0NCiAgICANCiAgICAjIE1haW4gbWVudSAjDQogICAgDQogICMgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHRyeToNCiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsLGhlYWRlcnM9aGVhZGVyKQ0KICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6DQogICAgICAgICAgICB1YXNjcmFwLmFwcGVuZChyZXNwb25zZS5qc29uKClbJ3VhJ10pDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICB1YXNjcmFwLmFwcGVuZCgiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMDsgU0FNU1VORyBTTS1HOTAwRiBCdWlsZC9MUlgyMVQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFNhbXN1bmdCcm93c2VyLzIuMSBDaHJvbWUvMzQuMC4xODQ3Ljc2IE1vYmlsZSBTYWZhcmkvNTM3LjM2IikNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgIHVhc2NyYXAuYXBwZW5kKCJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNS4wOyBTQU1TVU5HIFNNLUc5MDBGIEJ1aWxkL0xSWDIxVCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgU2Ftc3VuZ0Jyb3dzZXIvMi4xIENocm9tZS8zNC4wLjE4NDcuNzYgTW9iaWxlIFNhZmFyaS81MzcuMzYiKQ0KCQkNCiMjIy0tLS0tLS0tLS1bIEJBR0lBTiBTRVNTSU9OIEhFQURFUlMgREFOIFVTRVIgQUdFTlQgXS0tLS0tLS0tLS0gIyMjDQpjbGFzcyBTZXNzaW9uOg0KCQ0KCSMjIy0tLS0tLS0tLS1bIEdFTkVSQVRFIFVTRVIgQUdFTlQgQ1JBQ0sgXS0tLS0tLS0tLS0gIyMjDQoJZGVmIGdlbmVyYXRlX3VnZW50KHNlbGYpOg0KCQl2ZXJzaV9hbmRyb2lkID0gcmFuZG9tLnJhbmRpbnQoNCwxMikNCgkJdmVyc2lfY2hyb21lID0gc3RyKHJhbmRvbS5yYW5kaW50KDMwMCwzMjUpKSsiLjAuMC4iK3N0cihyYW5kb20ucmFuZGludCgxLDgpKSsiLiIrc3RyKHJhbmRvbS5yYW5kaW50KDQwLDE1MCkpDQoJCXZlcnNpX2FwcCA9IHJhbmRvbS5yYW5kaW50KDQxMDAwMDAwMCw0OTk5OTk5OTkpDQoJCWRldmljZSA9IHJhbmRvbS5jaG9pY2UoWyJNMjAwN0ozU1kgQnVpbGQvUlhVMzRZIiwiTkVPLVg3LTIxNkEgQnVpbGQvWFJONjhIIiwiU1RLLUxYMyBCdWlsZC9IVUFXRUlTVEstTFgzIiwiQlRWLVcwOSBCdWlsZC9IVUFXRUlCRUVUSE9WRU4tVzA5IiwiQ0xULUFMMDAgQnVpbGQvSFVBV0VJQ0xULUFMMDAiLCJMWUEtQUwxMCBCdWlsZC9IVUFXRUlMWUEtQUwxMCIsIkVMRS1MMjkgQnVpbGQvSFVBV0VJRUxFLUwyOSIsIkRJRy1BTDAwIEJ1aWxkL0hVQVdFSURJRy1BTDAwIiwiRVZBLUwwOSBCdWlsZC9IVUFXRUlFVkEtTDA5IiwiNS4xLjE7IEYxIEJ1aWxkL0xNWTQ3ViJdKQ0KCQlkZW5zaXR5ID0gcmFuZG9tLmNob2ljZShbIntkZW5zaXR5PTMuMCx3aWR0aD0xMDgwLGhlaWdodD0xOTIwfSIsIntkZW5zaXR5PTIuMCx3aWR0aD03MjAsaGVpZ2h0PTE0MTJ9Iiwie2RlbnNpdHk9MS41LCB3aWR0aD00ODAsIGhlaWdodD04MDB9Il0pDQoJCXVnZW50ID0gZiJEYXZpay8yLjEuMCAoTGludXg7IFU7IEFuZHJvaWQge2FuZHJvaWRfdmVyc2lvbn07IHttb2RlbF9kZXZpY2V9IEJ1aWxkL3tidWlsZF9kZXZpY2V9KSBbRkJBTi9NZXNzZW5nZXJMaXRlO0ZCQVYve3ZlcnNpX2Nocm9tZX07RkJQTi9jb20uZmFjZWJvb2subWxpdGU7RkJMQy97bGFuZ3VhZ2V9O0ZCQlYve3ZlcnNpX2FwcH07RkJDUi97c2ltY2FyZH07RkJNRi97bWVya19kZXZpY2V9O0ZCQkQve2JyYW5kX2RldmljZX07RkJEVi97bW9kZWxfZGV2aWNlfTtGQlNWL3thbmRyb2lkX3ZlcnNpb259O0ZCQ0Eve2NwdV9kZXZpY2V9O0ZCRE0vIitzdHIobGFyZ2VfZGV2aWNlKSsiO10iDQoJCXJldHVybiB1Z2VudAkJDQoJCQ0KaWYgX19uYW1lX189PSJfX21haW5fXyI6DQoJdHJ5Om9zLnN5c3RlbSgiZ2l0IHB1bGwiKQ0KCWV4Y2VwdDpwYXNzDQoJdHJ5Om9zLm1rZGlyKCJPSyIpDQoJZXhjZXB0OnBhc3MNCgl0cnk6b3MubWtkaXIoIkNQIikNCglleGNlcHQ6cGFzcw0KCXRyeTpvcy5ta2RpcigiZGF0YSIpDQoJZXhjZXB0OnBhc3MNCglNZW51KCkubWVudSgpDQojR3VuYWthbiBGYWNlYm9vayBkYWxhbSBtb2RlIGRhc2FyIGRlbmdhbiBUZWxrb21zZWw='))